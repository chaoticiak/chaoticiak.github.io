<!DOCTYPE html>
<html>

<head>
    <title>Mathematics in Puzzles - chaoticiak.github.io</title>
    <meta name="viewport" content="initial-scale=1,width=device-width">
    <meta property="og:title" content="Mathematics in Puzzles">
    <meta property="og:description" content="chaotic_iak's observations of the kinds of math popping up in puzzles">
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="subpage.css">
    <script src="script.js"></script>
    <script>
        topDestination = "toc";
    </script>
</head>

<body>
<header>
    <h1 id="title">Mathematics in Puzzles</h1>
    <nav id="menu"><ul>
        <li><a href="index.html">chaoticiak.github.io</a></li>
        <li class="focus-start"><a href="works.html">Back to works</a></li>
    </ul></nav>
</header>

<div id="changelog">
<p><b>Originally published <time datetime="2024-04-15">15 April 2024</time>.</b> First publication. If you've been waiting for more content after the talk, here it is! If you're only curious about the new stuff, here's a list:</p>
<ul>
    <li>Parity in path puzzles: More concrete theorem statements with proofs.</li>
    <li>Parity coloring: The example from A Monster's Expedition is one section, but there are several new sections based on region division puzzles.</li>
    <li>Topology: The teaser from my talk is here! The checkerboard lemma explained, together with Jordan curve theorem.</li>
    <li>Gridpoint counting: This is mostly identical, but there's one (difficult) puzzle taken from my archives to test your understanding.</li>
</ul>
<p>There may even be more content planned, I just want to get this one out for now.</p>
</div>

<p>On <time datetime="2024-04-05">5 April 2024</time>, I gave a talk for <a href="https://thinkygames.com/thinkycon/">ThinkyCon</a> titled <b>Mathematics for Puzzles</b>. (<a href="https://www.youtube.com/watch?v=AgqcCf5X_Q4"><b>Watch the VOD</b></a>, and check out the rest of the great talks!) It was about various examples of how mathematics pop up in puzzles, how certain logical deductions can be made by understanding mathematics. It was a fun talk, and it was positively received.</p>
<p>While preparing the talk, I found a lot of material. There were a lot of examples I could share, and there wasn't enough time to cover them. So I discussed a few during the talk, and left up a slide teasing other examples I would have loved to get into.</p>
<p>The good thing is that I have this website, where I have no time or character limit. So I figured, I can present my talk in text form. I can get into the examples I didn't manage to discuss. I can expand mathematical arguments to be more rigorous and convincing. I can structure the article better. And this is what you're reading.</p>
<p>This article is an expanded form of my talk. If you watched my talk, some of the content will be familiar, but there is still plenty of new stuff. If you haven't, then most, if not all, of the content in the talk should be included here as well.</p>
<p><strong>NOTE:</strong> The talk was originally aimed for puzzle game developers. This is still mostly true for this article. At the same time, I'm much more well-versed in logic puzzles, and a lot of these examples actually come from logic puzzles. Since my audience might not have the same level of understanding as I do, I try my best to get my arguments to a more basic level. If you're already familiar with logic puzzles, some of this content might sound trivial; just bear with it, it might not be so for others.</p>

<section><h2 id="toc" class="no-top-link">Table of contents</h2></section>
    <div class="notecard accented"><ul>
        <li><a href="#intro">Introduction and motivation</a></li>
        <li><a href="#parity">Parity in path puzzles</a></li>
        <ul>
            <li><a href="#alcazar">Alcazar</a></li>
            <li><a href="#parity-simple-examples">Two simple examples</a></li>
            <li><a href="#parity-multiple-paths">Example with multiple paths</a></li>
            <li><a href="#parity-subarea">Applying parity on a subarea</a></li>
            <li><a href="#parity-my-alcazar">Solving my Alcazar puzzle</a></li>
            <li><a href="#parity-my-slippery">A different, slippery puzzle</a></li>
            <li><a href="#parity-conclusion">Parity in path puzzles: conclusion</a></li>
        </ul>
        <li><a href="#coloring">Parity coloring</a></li>
        <ul>
            <li><a href="#coloring-region-division">Coloring in region division</a></li>
            <li><a href="#coloring-complicated">Complicated region division problems</a></li>
            <li><a href="#coloring-regions">Checkerboard regions</a></li>
            <li><a href="#coloring-behavior">Coloring based on behavior</a></li>
        </ul>
        <li><a href="#topology">Topology</a></li>
        <ul>
            <li><a href="#topology-checkerboard">The checkerboard lemma</a></li>
            <li><a href="#topology-border">The border connectivity lemma</a></li>
            <li><a href="#topology-yinyang-test">Your test: a Yin-Yang puzzle</a></li>
            <li><a href="#topology-jordan-curve">Jordan curve theorem</a></li>
            <li><a href="#topology-linelith-test">Your test: a Linelith puzzle</a></li>
            <li><a href="#topology-conclusion">Topology: conclusion</a></li>
        </ul>
        <li><a href="#gridpoint-counting">Specialized argument: gridpoint counting</a></li>
        <ul>
            <li><a href="#nurikabe">Nurikabe</a></li>
            <li><a href="#gridpoint-my-nurikabe">I gave a Nurikabe puzzle to people</a></li>
            <li><a href="#gridpoint-intuition">Intuition behind the argument</a></li>
            <li><a href="#gridpoint-definition">Gridpoint definition</a></li>
            <li><a href="#gridpoint-defect">Knowing and finding defects</a></li>
            <li><a href="#gridpoint-my-nurikabe">Solving my Nurikabe puzzle</a></li>
            <li><a href="#gridpoint-conclusion">Gridpoint counting: conclusion</a></li>
        </ul>
    </ul></div>
</section>

<section><h2 id="intro">Introduction and motivation</h2></section>
    <p>Puzzles are fun! Puzzles challenge our minds. It's satisfying to solve them.</p>
    <p>Some people consider them a waste, though. Well, I think those people need to find some joy in their life. It's still worth asking, though, do puzzles have offer more than a fun diversion? The answer is unquestionably yes.</p>
    <p>There has been a lot of research about how puzzles can be used for more "serious" purposes. Being brain teasers, puzzles help train our critical thinking and problem solving skills. Puzzles have a close connection to mathematical problems: they are about deriving a solution given the rules we're allowed to work with, whether it's mathematical axioms, puzzle rules, game mechanics, or something else. Progress is often incremental, building up from small deductions based on the rules, into larger and larger steps that can finally be chained together into a full solution. This is the same as math: working from axioms or base facts, building up into larger and larger theorems.</p>
    <p>Puzzles can also incorporate math topics. Mathematics is a subject that is often known to be "dry" and boring. It is pretty abstract, which might be difficult for people to understand. Puzzles can help put these mathematical topics in a more concrete setting, making them not only easier to understand, but showing various applications of them. Turns out, there <em>are</em> a lot of mathematics that can be found in puzzles that we do.</p>
    <p>And that's exactly what I want to talk about in this article. I will show various examples of how you can find mathematics embedded inside puzzles, so that the quest of solving the puzzle will lead you to discover and do mathematics. If you can do math while doing puzzles, that's certainly not a waste of time, yes?</p>
    <p>During the talk, I also emphasized, to the audience of puzzle game developers, that they should also try to find such hidden mathematical theory in their ruleset. Whether they were making a puzzle game, writing puzzles of a particular genre, or anything else. Dig deep into the rules and their implications, figure out what beautiful theories were waiting to be discovered. To be honest, this wasn't the point of the talk; I just wanted to share these examples. But I do hope these will still motivate you to think about your own puzzles either way.</p>
</section>

<section><h2 id="parity">Parity in path puzzles</h2>
    <figure class="float-right" style="width: 200px">
        <img src="math-in-puzzles/parity-intro.png" alt="All ways to continue a path are the same color">
        <figcaption>All ways to continue a path are the same color</figcaption>
    </figure>
    <p>Parity is an incredibly important concept in mathematics. An integer is either even or odd. Looking at the set of {even, odd}, we have the equations even + even = odd + odd = even, and even + odd = odd. These equations on parity are very useful and have been applied for other cases, such as parity of a permutation.</p>
    <p>One notable property of parity is the "flip-flop" nature. Stepping through the integers, you alternate between even and odd. And this oscillating nature of parity is very useful in puzzles, with its power best shown in path puzzles.</p>
    <p>A lot of puzzles involve drawing a path on a square grid that travel along adjacent cells. We can make use of parity, by coloring the grid in a checkerboard fashion. There are often several options to continue a path, but <em>all</em> of them will always be onto a cell of the opposite color. In mathematical terms, this is an <b>invariant</b>. This fact doesn't change, regardless of our path.</p>
    <p>An invariant is a powerful thing in mathematics. There are a lot of deductions and logic that come from recognizing this invariant, as you will see below.</p>

    <section><h3 id="alcazar">Alcazar</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=tVRdT9swFH3Pr6j8tEl+aL6H3zoGe+nYR5kmFFUoLYFWJA1zk4FSwW/n3OtkxU2moUlTFOeecx3f44/j7c861ZmM8PiRHEsXjxd6/LpBwO+4fc7XVZ6p0SRfpk2q5aSuVqVWozfXuixG1Sob3aRF9lZK+fn0VF6n+TZzEvoPY86dRHhCtu/8qZk+JcIV0p87u+ab2jWXKpk/yub7Pny3D2dqJ7xAKB8/R/zxffMJ+ROYXGByocmFJheZXGRyscnFlMPAZ2qH1uX2AkV8T6jEk2K51ss8u5zNBKSjTDxIh8O9oyEaBU65jMftOSYmG5/bD9yOuQ25nXKfEwhyXWyDC9GeKwF8AMzHAGyOi3kYEAJgigZE0qV1MgADeFDEwKdN7UAEEHcgJtDViVEn7urEqEPrZQDqxN3QEer8BiEALTKDACDsAM4ViA5gAL8DHoFuaB919gAK/E4BZWiLzdAAYQdCdItYNdbrB6/aMbcBtxGvZkyHyHESD535iV/3xZnF6RTbMr/c1vo6XWZC8amWzG3qYpFpi8rL8i5fb9Cv0nXLrW82pc72mYPu2dWNTZr+i1JfHQx+n+a5RRjrWpQ5chZV6bWFU63Le4sp0mplEYu0gtG3q/WdPVK2qWwBVWpLTG/Tg2rFfs6PjngQ/Ca0Eez8I9VMZPNRWZeDbL7C+p9UMyPnJ4JuCfIEXxgewpM2hNmw6dSB2GPDumPEZ22M8AKhbdDmi0qacymo0nv+nUJRlL8glf9jvCyLBSaTiBfLYTLb+qq8rdu+bO2JETztBFOVVjBpbwVTaPRSNKCXpvFC7/Q/yD2aP5qNGL/y4u3fkv92lf3VoA+t10o9aDfQA44DO2itlu+5C3zPR1SwbyWwA24Ce2goUH1PgezZCtwfnEWjHpqLVB36i0r1LEalXrosmTvP&a=RY/bCcQwEAN7ybd+zvtwMSb9t5G5aI+DwA4ayZBzbp1rhVbqc+lLEaZUTFZa/aMoUyucUU8vqI9FxX4JlX6FU0Ol9BYqLwjKWS2V3+P0UKq9pd5eUG8vKG33KI1FbVvU9pazbTmv5d//3/0A">
            <img src="math-in-puzzles/alcazar.png" alt="Alcazar example puzzle"></a>
            <figcaption>Alcazar example puzzle<br>
            (Click to try solving)</figcaption>
        </figure>
        <p>To showcase the logic in puzzles, I will need a puzzle genre, a set of rules to work with. I decided to choose a puzzle game called Alcazar.</p>
        <p><b>Alcazar</b> was a mobile game that was sadly discontinued in 2017. I remember playing it, though, and it was quite a delightful set of logic puzzles.</p>
        <p>One example puzzle is shown. The goal is to draw a single path from one of the exits to another, such that it visits all the cells exactly once. The path may only go through orthogonally adjacent cells (that is, cells sharing a side, not just a point; it also means the path must be going only horizontally and vertically). There are some walls inside the grid; the path may not go through the walls. In some puzzles, some cells might also be removed from the grid. All puzzles are supposed to have a unique solution; this is also the standard for logic pencil puzzles.</p>
        <p>One thing I love from Alcazar is its simplicity. The rules are very intuitive: it's basically solving a maze, and obviously you can't cross a wall. And yet, despite the straightforward rules, it has some rather deep and fascinating logic. It's possible to present a puzzle that looks impenetrable, but by knowing these hidden deduction steps, it becomes much more approachable. (In addition, since I presented this for an audience of puzzle game developers, using an actual puzzle game is always a plus.)</p>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=tVRfT9s+FH3Pp0B+9kOcv3/eGIPfS8fG4KcJRVXlhkAj0oal6UCp4LNzfO2qTeNpaNKUxrnn9Ob62PG5658b2ZY8xuVH3OUCl5ckdEeu+u2um6qry+zktC5kL1t+uukWTZudFAvZdFUxq+Qj5/zrxQW/l/W6dHJVCdfUyZnHuLmnb/3kLWeCcX/qbPvv2bafZfn0lff/78NkH15nW+ZHLPM58xN6BK5+aBRqFGoUaRR59Ig1ijVKNEoMCvBA/ctsi1HQeIu5vJBlucdZUbVFXc6urxlWAOGQYKNjOw01FjqwFwmhyEJH9iIxhFvo1F4ktWVjqRe0YI/GG+w0730aP9Po0hjSOKGcc2yNCEIuQqzBE5yJKOYihkQCSco9F/urAAIAsQMegL8DAQA2mN5JD0HscZGYNBHiFEamgAhSTGpKiyABSHdpANEOxEhTX1jLQbWUqkH6D1rAGY0BjREtLFYHzHFynHpzUmGBD0U40Ti7bN3Us/WmvZdFyTI685y41WY5L9sBVTfNU12tkNe1G8NVD6umLff/HKWXdw9DUufPm/buqPizrOsBoS09oPT3H1BdWw2wbNvmecAsZbcYEHPZoQWsF9XTsFK56oYCOjmUKB/l0WzL/ZpfHfbC6M59bC/1hTTrr3j/XzZoHby/QmP4kvW3qi/kTPUQdUCpnXgIz02Ik4/PrhIUe6ZZ4SK+NDHCW4RDt/Tfsry/4UzN9IleVyFbNr8gld4jXDTLORaTs4Pt0P+sN3fN48bkks9OteDJTrCaxQhW2o1gFWq9KrLoVcs40Dv5B3LT6av+EO4H2/K4ef5dX/mjRV+M15rWajfQFseBtVrL8CN3gR/5SE04thJYi5vAHhsK1NhTIEe2AvcbZ6mqx+ZSqo79paYaWUxNdeiyfOq8Aw==&a=RZDBDcUgDEN34exDC4SYWVD3X6MW5vdLSH5yXnJgrQer1EAbuAtKTTRuUtHSlOinI/o0TfTrR2FSEbfp2xDFoc+TNKqJCN9TDE8Vw1cUaU96NtNEHm+CJhXpDcXZkM6+SRI9VdBTBX1PsT39wv89Lw==">
            <img src="math-in-puzzles/my-alcazar.png" alt="Alcazar puzzle, by me"></a>
            <figcaption>Alcazar puzzle, by me<br>
            (Click to try solving)</figcaption>
        </figure>
        <p>In fact, I will present one such puzzle right now. Here's an unassuming 5x5 puzzle. (I presented this same puzzle for my talk.) You can try doing it yourself; just click on the image! Unfortunately, it's not as pretty as how Alcazar looks in the actual app, but that's not the point. (The dots indicate exits. The board is colored in a checkerboard manner to match how it looks in the game.)</p>
        <p>Since it is a logic puzzle, you shouldn't resort to guessing; you should be able to definitively prove that your solution is the only possible solution.</p>
        <p>If you don't know the tricks of Alcazar, specifically about parity, you will likely get stuck. There are very few walls, and it looks like everything is so open that you can draw a bunch of paths, only for all of them to get stuck one way or another &mdash; a cell missed, a path unable to leave the grid, and so on. So how can you actually solve the puzzle? Read on.</p>
    </section>

    <section><h3 id="parity-simple-examples">Two simple examples</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/which-exits-used-1.png" alt="Which exits does the path must use?">
            <figcaption>Which exits does the path must use?</figcaption>
        </figure>
        <p>Consider this first example. The rules are the same as Alcazar: draw a path starting from one exit to another that visits all the cells exactly once. Although, it's not guaranteed there's a unique solution. Instead, the question is about exits. Among the many labeled exits, <b>which exits must the path use?</b></p>
        <p>Since we have discussed parity, we will now make use of it. The board has been colored in a checkerboard manner. As mentioned before, the path is going to alternate between the two colors. We will make use of the fact that the path visits all cells. This will allow us to figure out the color of each cell along the path.</p>
        <p>Let's pair up the cells of the path. The 1<sup>st</sup> and the 2<sup>nd</sup> cells will be of opposite colors, because the path always alternates colors. Likewise, the 3<sup>rd</sup> and the 4<sup>th</sup> cells will be of opposite colors. Then the 5<sup>th</sup> and 6<sup>th</sup>, then the 7<sup>th</sup> and 8<sup>th</sup>, and so on.</p>
        <p>Since the path visits all the cells, it will have 25 cells. So we end up pairing the 23<sup>rd</sup> and 24<sup>th</sup> cells, and we leave the 25<sup>th</sup> cell unpaired.</p>
        <p>Now we count the colors of the cells. There are 13 dark cells and 12 light cells. But in each pair of cells mentioned earlier, we know they are of opposite colors, so each pair contributes 1 dark cell and 1 light cell. That means the 12 pairs will contribute 12 dark cells and 12 light cells total. The last unpaired cell, the 25<sup>th</sup>, will be a dark cell, to complete the count.</p>
        <p>Notice how we can do all this without even considering how the path goes on the grid! There are a lot of ways the path might go. But every single such path will always alternate colors, and this fact is what we're using.</p>
        <p>What does having the 25<sup>th</sup> cell being dark tell us? Since the 25<sup>th</sup> cell is the last cell of the path, it means the path leaves the grid after that. That means the path uses a dark exit.</p>
        <p>We don't have to stop there, though. Since we know the path alternates colors, because the 25<sup>th</sup> cell is dark, it follows the 24<sup>th</sup> cell is light. And so the 23<sup>rd</sup> cell is dark, the 22<sup>nd</sup> cell is light, the 21<sup>st</sup> cell is dark... Following this all the way to the beginning, we find out the 1<sup>st</sup> cell is dark. This is the start of the path, so the path also uses a dark exit to enter the grid.</p>
        <p>That means the path uses two dark exits. Despite the grid having five exits, only two of them are dark exits. So we know the path must use exits <b>A and D</b>. The exits B, C, E are fake and are not used.</p>
        <hr class="clear-float">
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/which-exits-used-2.png" alt="Which exit does the path must use?">
            <figcaption>Which exit does the path must use?</figcaption>
        </figure>
        <p>If you analyze the above argument carefully, we use the fact that the path visits all cells, so that we can count up the colors and decide based on that. But nothing about the argument says the grid has to be rectangular! As long as we use all the cells, it doesn't matter how funny the grid looks like.</p>
        <p>Consider this second example. The grid looks pretty wild, but that doesn't matter for us. Counting up the cells, this time we find 13 dark cells and 13 light cells. The counts are now equal. Can we pair up the cells?</p>
        <p>We can pair up the cells, but doing it the obvious way &mdash; 1<sup>st</sup> and 2<sup>nd</sup>, then 3<sup>rd</sup> and 4<sup>th</sup>, and so on &mdash; won't lead to anything. We have to be slightly more tricky: we <em>skip</em> the 1<sup>st</sup> cell and pair up the rest. So we pair up 2<sup>nd</sup> and 3<sup>rd</sup>, then 4<sup>th</sup> and 5<sup>th</sup>, and so on. The 1<sup>st</sup> cell remains unpaired, and when we continue this all the way, we find the last cell, the 26<sup>th</sup>, also remains unpaired.</p>
        <p>However, we know there are 13 dark cells and 13 light cells. The 12 pairs account for 12 dark cells and 12 light cells. Therefore, there is 1 dark and 1 light cell remaining, which must go to the 1<sup>st</sup> and 26<sup>th</sup> cells. In a way, these two cells form a pair too.</p>
        <p>What are these cells? Well, the 1<sup>st</sup> cell is the start of the path and the 26<sup>th</sup> cell is the end of the path. That means these are the two endpoints of the path! What we have proven is that the path will start and end on opposite colors: one of them is dark, the other is light.</p>
        <p>Looking back at the grid, we can see three dark exits (A, B, C), but only one light exit (D). Therefore, the path must use <b>exit D</b>, since we must have a light exit. We don't know which of the three dark exits is used &mdash; there is a solution for any of them &mdash; but we know the only light exit D must be used.</p>
        <hr class="clear-float">
        <p>The exact counts of the dark cells and light cells aren't that important. What's more important is the difference between the two, and it's useful to define this quantity: the <b>dark excess</b> is how many more dark cells we have than light cells. (If we have more light cells than dark cells, then the dark excess is negative.)</p>
        <p>We can formalize what we've discussed in a theorem:</p>
        <div class="notecard accented">
            <p>Following the rules of Alcazar, one of the following is true:</p>
            <ul>
                <li>If the dark excess is +1, then it's a dark-dark path: the two exits are on dark cells.</li>
                <li>If the dark excess is =0, then it's a dark-light path: the two exits are on opposite colors.</li>
                <li>If the dark excess is &minus;1, then it's a light-light path: the two exits are on light cells.</li>
            </ul>
        </div>
        <p>It's impossible for the dark excess to be greater than +1 or less then &minus;1. At least, if there's only one path.</p>
        <p>That said, the power of this theorem comes from how much more it can be generalized, as in the following section.</p>
    </section>

    <section><h3 id="parity-multiple-paths">Example with multiple paths</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/which-exits-used-3.png" alt="There may be multiple paths. Which exits are used?">
            <figcaption>There may be multiple paths. Which exits are used?</figcaption>
        </figure>
        <p>Consider the following example. Unlike in previous examples, <b>there may be multiple paths</b>. But all cells must still be visited exactly once, which also implies the paths can't intersect or overlap or anything.</p>
        <p>The theorem from the previous section is still true! And having multiple paths is fine, because they are additive: we can add up the dark excesses of the paths, and the sum should be the dark excess of the whole grid.</p>
        <p>In this example, the dark excess is +1 (there are 12 dark cells and 11 light cells). So the sum of the dark excesses must be 1. This means we have at least one dark-dark path. There may be more dark-dark paths, if there are an equal number of light-light paths to cancel the dark excesses. Finally, there might be dark-light paths.</p>
        <p>However, it should be clear that exit A in the bottom-left will be used; that's the only way to use the cell. This is a light exit! So one of our paths will have at least a light exit; this is not the dark-dark path. What are our options?</p>
        <p>It might be a light-light path. Then, as mentioned before, we have to pair it off with a dark-dark path, in addition to the one dark-dark path to get a dark excess of +1. So we end up with at least two dark-dark paths. But this is impossible; there are only 3 dark exits on the grid.</p>
        <p>So it's a dark-light path, which doesn't affect the dark excess. We also have the dark-dark path to give a dark excess of +1. In total, these paths together use 3 dark exits, which is everything we have. That means all the dark exits are used.</p>
        <p>Is there any other path? Well, we run out of dark exits, so we can't have any dark-dark path or dark-light path. And a light-light path will reduce our dark excess, but we can't raise it because we can't have any more dark-dark path. So these are all our paths; there's no other path.</p>
        <p>As a result, the exits used are <b>A, C, E, G</b>: exit A because it's used to visit the bottom-left cell, and exits C, E, G to count up the 3 dark exits we need.</p>
        <hr class="clear-float">
        <p>Instead of talking about paths, it's more convenient to talk about the exits being used. In this case, the theorem becomes extremely straightforward:</p>
        <div class="notecard accented">
            <p>If the dark excess is <var>N</var>, then there are exactly 2<var>N</var> more dark exits than light exits. (If <var>N</var> is negative, then there are more light exits than dark exits.)</p>
        </div>
        <p>You can verify this from the previous theorem. For example, the first case of dark excess +1 gives 2 dark exits and 0 light exits, so there are 2 more dark exits than light exits as a result. Adding up the dark excesses, as well as the dark exits and light exits, will give this.</p>
        <p>In practice, the addition of dark-light paths "for free" makes it difficult to count the exact number of dark/light exits. Instead, we rely on the lower bound:
        <div class="notecard accented">
            <p>Corollary of the theorem:</p>
            <ul>
                <li>If the dark excess is +<var>N</var>, then there are at least 2<var>N</var> dark exits.</li>
                <li>If the dark excess is =0, then there is at least 1 exit of each color (unless the area is completely empty).</li>
                <li>If the dark excess is &minus;<var>N</var>, then there are at least 2<var>N</var> light exits.</li>
            </ul>
        </div>
        <p>The first and third cases are simply because exits of a color can't be lower than 0. The second case uses the fact that the number of dark exits and light exits are the same; but if an area has to be visited, it has to have at least one path coming in, so there must be some exit somewhere. That gives us the 1 exit of each color.</p>
    </section>

    <section><h3 id="parity-subarea">Applying parity on a subarea</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/which-exits-used-4.png" alt="Which exits must be used leaving out the green area?">
            <figcaption>Which exits must be used leaving out the green area?</figcaption>
        </figure>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/which-exits-used-4-sol.png" alt="Solution">
            <figcaption>Solution</figcaption>
        </figure>
        <p>You might be wondering. Why are we talking about multiple paths? The actual rules for Alcazar doesn't actually use multiple paths.</p>
        <p>Well, true. For the entire grid, this is true. But the power of our analysis is that it's applicable even for subareas.</p>
        <p>Consider the following example. This time, the puzzle by itself is open with not much analysis to do (the dark excess is =0). However, let's consider the green area.</p>
        <p>In the green area, the dark excess is &minus;2. So we need at least 4 light exits. There are exactly 4 available: A, C, D, F. So we know all of them are used, and that exits B and E are not used. This allows us to draw segments inside the grid, as well as walls that we know the path cannot use. Hopefully it's clear that being able to do so is very helpful, and possibly allow further deductions down the line.</p>
        <p>The reason we talk about multiple paths is because, in a subarea like this one, it's <em>not</em> true that there will only be one path visiting it. There can be multiple paths inside the area, because our solution path might visit and leave it multiple times. But, as we can see, parity is still very useful and applicable, just with a little change in the statement of the theorem.</p>
    </section>

    <section><h3 id="parity-my-alcazar">Solving my Alcazar puzzle</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=tVRfT9s+FH3Pp0B+9kOcv3/eGIPfS8fG4KcJRVXlhkAj0oal6UCp4LNzfO2qTeNpaNKUxrnn9Ob62PG5658b2ZY8xuVH3OUCl5ckdEeu+u2um6qry+zktC5kL1t+uukWTZudFAvZdFUxq+Qj5/zrxQW/l/W6dHJVCdfUyZnHuLmnb/3kLWeCcX/qbPvv2bafZfn0lff/78NkH15nW+ZHLPM58xN6BK5+aBRqFGoUaRR59Ig1ijVKNEoMCvBA/ctsi1HQeIu5vJBlucdZUbVFXc6urxlWAOGQYKNjOw01FjqwFwmhyEJH9iIxhFvo1F4ktWVjqRe0YI/GG+w0730aP9Po0hjSOKGcc2yNCEIuQqzBE5yJKOYihkQCSco9F/urAAIAsQMegL8DAQA2mN5JD0HscZGYNBHiFEamgAhSTGpKiyABSHdpANEOxEhTX1jLQbWUqkH6D1rAGY0BjREtLFYHzHFynHpzUmGBD0U40Ti7bN3Us/WmvZdFyTI685y41WY5L9sBVTfNU12tkNe1G8NVD6umLff/HKWXdw9DUufPm/buqPizrOsBoS09oPT3H1BdWw2wbNvmecAsZbcYEHPZoQWsF9XTsFK56oYCOjmUKB/l0WzL/ZpfHfbC6M59bC/1hTTrr3j/XzZoHby/QmP4kvW3qi/kTPUQdUCpnXgIz02Ik4/PrhIUe6ZZ4SK+NDHCW4RDt/Tfsry/4UzN9IleVyFbNr8gld4jXDTLORaTs4Pt0P+sN3fN48bkks9OteDJTrCaxQhW2o1gFWq9KrLoVcs40Dv5B3LT6av+EO4H2/K4ef5dX/mjRV+M15rWajfQFseBtVrL8CN3gR/5SE04thJYi5vAHhsK1NhTIEe2AvcbZ6mqx+ZSqo79paYaWUxNdeiyfOq8Aw==&a=RZDBDcUgDEN34exDC4SYWVD3X6MW5vdLSH5yXnJgrQer1EAbuAtKTTRuUtHSlOinI/o0TfTrR2FSEbfp2xDFoc+TNKqJCN9TDE8Vw1cUaU96NtNEHm+CJhXpDcXZkM6+SRI9VdBTBX1PsT39wv89Lw==">
            <img src="math-in-puzzles/my-alcazar.png" alt="Alcazar puzzle, by me"></a>
            <figcaption>Alcazar puzzle, by me<br>
            (Click to try solving)</figcaption>
            <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7VVNc9s2EL3rV2Rw3gPBz4+bm8a9uElbu5PxcDQammZijinTpaimQ4/+ex4WYC2KgOMeml46lKDdt9BiAS7e2/2xL/uaEjxBTB5JPH6a8jf21Gd6rpqhrfM3Z21VjmVPZ/vhruvzN9Vd2Q1NtWnKeyL6cH5On8p2V68KlQnPevU0Zvl4RuNPeSF8Qea7pvHX/Gn8OR+vabxESFAA7AKWFOTDfGdMCfsjT1DoW41KD/Z7Y8O8hlk1fdXWm8tLDf2SF+MVCbXSD/x3ZYpt92ct9P/Yr7rtTaOAm3LABnd3zaOJ7Pa33f3ezJXrA41nuuCLqWC1iilY1W4KVqauV1mWetU2juq9+BfKzdaHAw7+NxS8yQtV++/PZvpsXuZPIohFHpAIUv4JPf2jvUh7kfZi7cU+/yTaS7SXai81Xogf5H+fP2GUPF5jLT9CgT62MXtVwkcJNjixw6jGAof2JBEqssCxPUmCwi1wZk+S2WZjq+e8YZ/HK5w0jQGPP/Lo8RjxeMFz3uFoZBiRjLAHX5KQcUIyQYnspBn5Hs5XOTDgyMnx4QSTE8LBAfN/smMn8UmmZpqMcMtjk0CGGRY1qWWYwsmmaXDiyUkwTb1hXQ6yZZwNpX/kDbzlMeQx5o0lqsFe2YLLRvmnZ4jGAn/pPo4pQN8oKyHTxuGxZZoZ+1N7VVYGnjMNTupklCXJNHbybHmUmGhGpvthTZ3vUaqjqaTpGvikjl1ZAfGdQJa/rdinREcjSeZShR5FOkuQkbmLsMw9xNsyVpBSqKv3wdxqR7qNvvlGCpyPoWZw/qus9aoAi4td1252+/5TWYGRmORBOsAe9tubup9Bbdc9ts3DfF7z+aHra2tIgfXtZ9v8m66/Pcn+pWzbGaBFbAbpGzmDhh7EeeSXfd99mSHbcribAUckO8tUPwzzAoZyXmJ5X56stn3e82El/hL8LQKcb/C/RP5nEqlegvfdWOqVV/Qb5RQ4XcN3NH4g8bjflJuqawXhADmoKdAVZC50BDVRuoPgTkdQ06kryAzrCGrSdQWZfR1BTc2uILO1Ky0TuDsITncENc27gsz8riCLgSvIquDayktBrSKug2dhcb1P1hpXm7D8uIPQIVfal4JatxxBLWWL4He/f0zYXW9VO8AWwQNqFTaDL7QN+ELF1IJLIQNq0TKgp3IGaKloABeiBsyhayrrqbSpqk7VTS21EDi11LHGFevVVw== -->
        </figure>
        <p>So, it's time to get back to my Alcazar puzzle. You've seen the power of using parity; it's time to apply it for real.</p>
        <p>If you haven't done so, try solving the puzzle on your own first. Once you're ready, click the spoiler box below to read the full solution path.</p>
        <details class="notecard callout clear-float"><summary>Logical solve path to the puzzle</summary>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-alcazar-1.png" alt="Solving the puzzle, step 1">
                    <figcaption>Solving the puzzle, step 1</figcaption>
                </figure>
                <p>The puzzle has dark excess +1, so the solution path has 2 dark exits. (Remember that, since we're considering the whole grid, we know there is only one path.) There are only 2 dark exits on the grid, which we must use. In addition, all the light exits are not used.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-alcazar-2.png" alt="Solving the puzzle, step 2">
                    <figcaption>Solving the puzzle, step 2</figcaption>
                </figure>
                <p>Having these walls allows us to draw several lines, mainly along the right side. These are simply about completing corners. We have to visit all cells, including corners. But a corner (or a tunnel) only has two exits into the cell, which we obviously must use.</p>
                <p>Alternatively, you can be cheeky and apply parity on a subarea, where the area contains only one cell, the corner cell itself. Don't believe it? Try formalizing the argument yourself.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-alcazar-3.png" alt="Solving the puzzle, step 3">
                    <figcaption>Solving the puzzle, step 3</figcaption>
                </figure>
                <p>The top-right of this puzzle is interesting. We can't close the loop early; we need a single solution path visiting all the cells, not a path plus a loop. So we can extend a segment downward.</p>
                <p>But we can also use parity to reason the same way. The top-right green area has dark excess =0, so there are an equal number of dark and light exits. We must have at least 1 of each, but there is only 1 light exit available, which is exactly the line we draw.</p>
                <p>This also explains why the corollary can say we have at least 1 dark and 1 light exit. If we don't have any exit at all, we end up with a loop; our solution path cannot visit it. So, this loop avoidance is somehow also an instance of parity. When I said parity is extremely powerful, it's because it also encompasses various other kinds of deductions.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-alcazar-4.png" alt="Solving the puzzle, step 4">
                    <figcaption>Solving the puzzle, step 4</figcaption>
                </figure>
                <p>The previous step might have been doable without parity, simply by avoiding a clear loop. This step is more difficult to spot, and the next one even harder, but they are all again instances of parity.</p>
                <p>The green subarea on the bottom-left has dark excess =0, so it has at least 1 dark and 1 light exit. The only dark exit available is marked.</p>
                <p>We might have been able to see this without parity: the cell on the top-right of the green area cannot go left and down, because that makes a loop. So at least one of its exits must go right. Indeed, this is the exact same argument we use to prove our parity-based theorem works.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-alcazar-5.png" alt="Solving the puzzle, step 5">
                    <figcaption>Solving the puzzle, step 5</figcaption>
                </figure>
                <p>Now the green subarea grows. The argument is still the same: the dark excess is still =0, so the only dark exit must be used.</p>
                <p>This technique is known in the logic puzzle community. (Of course, as I'm sharing it with you.) It's known under the name "parity bouncing", because we are using parity over and over again. The subarea, in which we apply parity on, is growing larger and larger, and each one creates a new segment. Most often, the segment is the result of having a possible new exit blocked by a wall, hence why it's called "bouncing"; it feels like bouncing around the grid.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-alcazar-6.png" alt="Solving the puzzle, step 6">
                    <figcaption>Solving the puzzle, step 6</figcaption>
                </figure>
                <p>The segment we drew just now is very important, because it gives us a new corner. This new corner, in turn, connects with the segment we drew in step 4. I will leave the final steps to you, but you can imagine how the segments continue connecting along the bottom-left, and how the puzzle becomes much more approachable after this.</p>
            </div>
            <hr class="clear-float invisible">
        </details>
    </section>

    <section><h3 id="parity-my-slippery">A different, slippery puzzle</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=tZRRT9s+FMXf8ymQn/6T7kPiNGX4DRjsBRgbTAhFUeWWQCPShjnpQKngs3N84624yTQ06a+o7i+nzr3HtU/qHyttchpTQvGYQopwyUSSjMYURyP+hO66LJoyVzsH2izrnf/OdTP/QPurZl4ZtTOb66opZpNC3xPRl+NjutVlnQepfTCiMAtSIQW5T/bSnrykIhIUZ8G6/abW7USl2TO13zf4cYMXai3iWKiERDziryTpvsb4woQztcYY8XhtJ0uhUkliVphZmU8uLgRFGR5GjXSPxK3Ri7wslrmTUXNAToaL2NZDs2GlJ8POMZuSPF5iOdTGPH7iMeQx4fGE5xzBfhRKiiK0R3fmEMaZYzDcMo/A8MKcgGGAeQzedbyLOo4jsHQswbHjGDxyPAInjhPU+c2obxfIjL72P2CGn8T5wanBvatj2fmXYLsfEou74iUe8jjiccxL37X7HASpRD13oft7CAcLR0jUVTmpV+ZWz3Kh+OgRa8vVYpobTyqr6oH3RzVm5bTiblmZfPPL1vT85s4Xu/nTytxsFX/UZekJXcA8qTtPntSYwrvXxlSPnrJA3DxhqhvEsZ4XD36lfNn4BhrtW9T3eqvbYrPm50A8Cf6kdis4nnuq3af2s/ISTO1X5PNUtdc2nqkQlPAR5lRL4NEGr/h3S4edGIXgM8fAa6Afp/Zcpe0lCdvogB+3KBbVTzjl5/h+Vi2mWEsq3vwb3S/16qa6X7m5HMT9zu/JL7/Wj/Mbv/Frm3eGrTpg2D5nDXc7Ozn9H/zuZc/dRoTvfDv2X4H/9ub5a0SfXNYqMxg3yAOJgzoYLaf30gW9lyPbsB8lqANpgrodKEj9TEHsxQraH5Jlq26Hy7razpdt1YuYbfU2ZWkWvAI=&a=RZDRCcQwDEN36bd+zpbtYUL3X6O6k8tBQY9EeoWcc+NckQjic+FLmSYiylSINjViTIM0ZbwLRdoi4p4RaYsibVFwaUBbVKe3CnqhqCUt3KtA2azoJb49Uduig/I/RL23jVrLoE1S7EKl9kLxu9XL/L/7AQ==">
            <img src="math-in-puzzles/my-slippery.png" alt="Barns (Path) puzzle, by me"></a>
            <figcaption>Barns (Path) puzzle, by me<br>
            (Click to try solving)</figcaption>
            <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7VZNb9tGEL3rVxg8tcAcyOVyVfPmpHEvzkdrF4FBCAIt0zFhSnQpsiko+L/nzew6MkVu46KoewkELZ/m7e68/eA8bf/o8qYgQwnFhkKK8FGJIhUZiiMt39B9Lsq2KtKjV3mz2R798CFvb3+kk669rZv0aHWb1225Wpb5HRG9Pz2lm7zaFrOMB0YULma7/jjtT6j/Jc0CFZD7Lqj/Nd31b9P+kvpzUAEliJ0BRQEpwDd7+FF4Rq9tMAqB3zkMeAl40+Troio3hQ19SLP+ggJO9EqGMwzW9Z9FYMfJ71W9vio5cJW3WOT2trx3zLa7ru861zdaPFB/YvWePeplPU5v/EQvJ7eCOTohmMexYHsEy7f/gd7jxcMDNv43KF6mGYv/fQ9/2sPzdBfEcZAmFMRaHkliHwYPdHiX7tBG0l5yZ4UMCjrKZlUVy/NzES9zZMd0cAYy50Q4mZ6EU0/1hpRRGHJORZSS9gLLoT6W9mdpQ2kTac+kzxvIj0JFUYT0yC44hHDBMTDUCtbA0CI4AYYAwQZ47vAc8zgcASuHFXDscAysHdbAicMJ5vmKMT8vUDDy8h4Ihp7E6cFbid9uHsZOvwLm81BY3EdZ4mtptbRGlj7nc37mTRgf9z/dZVwP4qsQ840gPn1GKCZYFSOuNRYZ0hZpIOwFx+aPCJvIe8jIEO8so4SUHaE0CpVFMSmbA2ifV1ukgSyrNWk7QifEOwyEjTcWGSA7szFkbLZk/hWhQjqEsbYfDupxFk3G5jDxI8LRGasAB8fnFtvL981TyrAKLsP8wRV5DlrMMhTYYFtXy23X3OQrFAupv6gHiG269VXRDEJVXd/LS5S2Tedi5adN3RR75qB7cf1pGLT9r+rm+mDyz3lVDQK2xA1C9qUfhNoGJe3J77xp6s+DyBqeMwg8KX+DmYpNOxTQ5kOJ+V1+kG29X/PDLPgrkG/GRxF/N6//zbz4EMIXK1zPfEO/ISfD9roSSP17Cu67Zb5c1VWAv0H0b0mppz5SSqyPlKrrI6UQe0hbm30jpVx7SFvBfaQUdR8pdd5HSun3keIGfvJv9xae4dsEsREfKc7iI8VsPKT1Hw9pLclHikv5phXj8pHiZX5BsDcfKY7nJ2F9PrXii76RYpU+UtxzRL74Oy8mUTeTBovwhMciOmmmLj7yU8RHzskJx+aJ6IR/InpooQiNXRTBkZEi5vFSnvXQTlnVoaNyqpGpcqqnvpotZl8A -->
        </figure>
        <p>Let's do a slightly different example. This was also presented in my talk; in fact, I gave this puzzle before I started the talk proper, so people could look and think about it while I was talking.</p>
        <p>The rules are the same as Alcazar. However, there are now <b>ice cells</b>. Ice is slippery; when you're on ice, you <b>may not turn</b>. However, ice cells <b>may be visited twice</b>: you may cross an ice cell on one axis (horizontally or vertically), and later cross the same cell on the other axis.</p>
        <p>(The genre name "Barns (Path)" is just a technicality. There's a logic puzzle genre called "Barns" in which the rules are the same, except you draw a single loop on the grid instead of a path. You don't need to know this.)</p>
        <p>Once again, you can try the puzzle yourself first, and then read the solve path below.</p>
        <details class="notecard callout clear-float"><summary>Logical solve path to the puzzle</summary>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-slippery-1.png" alt="Solving the puzzle, step 1">
                    <figcaption>Solving the puzzle, step 1</figcaption>
                </figure>
                <p>We give the checkerboard coloring again. Since we have one path with 2 light exits, the dark excess will be &minus;1.</p>
                <p>The problem is that there are 13 dark cells and 12 light cells, so the dark excess is currently +1. There is no way to modify the exits, so we have to change the dark excess. What?</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-slippery-2.png" alt="Solving the puzzle, step 2">
                    <figcaption>Solving the puzzle, step 2</figcaption>
                </figure>
                <p>In this puzzle, we are not limited to visiting exactly 13 dark cells and 12 light cells. Ice crossings allow us to change this number. A crossing essentially counts the cell twice. The cells along a path will still alternate colors, but the same cell might serve as two different cells along the path.</p>
                <p>This fact is what we're using here. The dark excess is currently +1, and we have to bring it to &minus;1. That means we need to add 2 extra light cells. This can be done by making a crossing on the two light ice cells. By doing so, the path now uses 13 dark cells and 14 light cells, giving a dark excess of &minus;1 as desired.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-slippery-3.png" alt="Solving the puzzle, step 3">
                    <figcaption>Solving the puzzle, step 3</figcaption>
                </figure>
                <p>We can extend the deduction. The dark excess is &minus;1, which is good, but this may still change with other crossings. However, there are no more light ice cells to be crossed, so the dark excess cannot go any further negative. That means, if we ever make a crossing on a dark ice cell, the dark excess will increase and cannot decrease any more. Since this cannot happen, we know the dark ice cells cannot be crossed at all.</p>
                <p>The rest of the puzzle is left to you; it's simply a lot of corner filling. The key idea behind the puzzle is all done; it's about determining the crossings by using parity.</p>
            </div>
            <hr class="clear-float invisible">
        </details>
    </section>

    <section><h3 id="parity-conclusion">Parity in path puzzles: conclusion</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=tVVdT9tKEH3Pr0D7PA/eteOvN0qhLym9FKoKWVG0CYZYODF1nIIcwW/n7Ky5wfFWt71SZWV35ux65sx6z2TzY6vrnGKKyA/JI4nHVwGpOKYglPzzuueqaMo8PTouF7rVNR1vm2VVp0eLpa6aYjEr9D0RfTk7o1tdbvJRZmLhmY4yoQR1v+lLO3nJhBTkT0e79mu6a2dpNn2m9tvejPfmZboTfiJSn0Qg7eTzNFZ2CuwU8hTatXBsp4inyK5FMU+xZye7FtvQiQmNbOfpDqPk8RqZFd7JFIlFUS/KfHZ5KVAPysBbDthHaBeM4C7YHTsAdwc8dsceowwHHLoJRjgsBxy7CUrPnVN6OHonjtN34q60OOEzPmfF4xU+N7U+jx959Hgc8zjhPafmi3ghKYmjUxLfQcZwUCs7yiOlUAo7XrJ3ZKxIJiDBThLAwSGzE+GCRiiHnXFMctxFk7j4MkJBNg9Cy7doCUL/68QRybijI0OfZNjlUVKBATug/p0LOOEx4DHkwiJzy0ejzE+sWPhByD+xITBISWyqcrbZ1rd6kYuUJUiMrbereV73oLKqHspijX1Nve2w4m5d1fl+5WB7fnPXB+3+eVXfHAR/1GXZA2yP6UH2JvSgpi56vq7r6rGHrHSz7AFz3aAjbZbFQz9Svm76BBrdp6jv9UG21b7m55F4EvzL8Dltm0rS9oLaT2mvk1F7gT71OW2vTZvKhGlp5qpyd1MwTzsTIsAFMBsMemJR6cE+72yY1zD7wmn/SbP2ioTJ9IFfN6ZYVT9Bld9jf1Gt5igmE++Ow65stjfV/bbby4o7toQnb4RNlo6w4d4RNqblaywHX1PGO76Tv0A3mT7bD+H95r/EsHv/vw7zn2J96rRW1U65AXYoDqhTWh0+UBfwgY5MwqGUgDrUBPRQUICGmgI4kBWwXyjLRD0Ul2F1qC+TaiAxk+q9yrLp6BU=&a=RZBLCsUgEATv4roXL3F+nkVy/2uksY0PAlPEqkGc88FsvdAHrobGYb9FHHaJLngX3bBDbqIO22TwWOQs7o9CBX/sLQxje34KR+Qi6qF9HKnT4Omh3F4idecoxKHS7ZOeClKpYFjysr6WNFQwHLoz9SoR98mjNPQaHMvju/2/5wU=">
            <img src="math-in-puzzles/my-test.png" alt="Final test (Alcazar), by me"></a>
            <figcaption>Final test (Alcazar), by me<br>
            (Click to try solving)</figcaption>
            <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7VVNb9tGEL3rVwR7ngOXnx83N417cZOmdhEYhCDQMhMLpkyXopqChv573s6sKlHaRZJD00shaHf2veXuzJAzb/Pntu4byimjKKWANH5RGFOY5xSnmv+B/d2shrYpX120y3qse7rYDg9dX75aPtTdsFouVvUjEb27vKSPdbtpZpU5C7/57GUsyvE9jb+UlQoV2f+cxvfly/hrOd7SeA1KUQTsCpZWFMJ8Y00N+wNvMOhrQXUA+621Yd7CXK76Zdssrq8F+q2sxhtS5qaf+HFjqnX3V6PkOV4vu/XdygB39YAANw+rZ8tstvfd49bu1fMdjRfi8NXeYXOLddj4bh02pvhrLIe/Jowjf6/+BXeL+W6HxP8OhxdlZXz/42DmB/O6fFFRocqIVKxlinhKQplimVKeUuHSRKaMp0y4LOcpD2QSLpejC3M0bntbvmDUPN7i5hDPVCGCmrw4FeIpBxzhaBeMw12w++wYvjvgxH12gjAccOp2MEOyHHDudlAH7jt1gNQ7cWTfibuuRYYvOc8hjzd43TRGPP7MY8BjwuMV73lj3kiQouCQulDjPegcC8TKizCgMEQovAiKw0LnIekCTvCiiLFAknmRoQFkCIcXSU46sadpNBadISC5B0fr/WkFjv5nkWekc+uOTiPSqb0n1CE84AVc/8ABvOYx5jHlwDLzlX9jHZx/n9+bQ5UltP/wMzJuGysnWwUZMLHSmGzVICQTkSkxTba8YO2rL6REsCgnW6ZRQbHUWBzQvmbxhOyDB/uTYYkvsFKLZZRZX9DyxUriPRvjNvEFlm0DcUSxxWKyXSBJjqx9E8ipEK+KgLjcTdVTIXHkwMRKkQ3ZB8uUkWkL+PC++g4rxG0VBT98Fd9jz2cVZEhtunax2fYf6yVaKqsUuiawp+36ruknUNt1z+3qCfuGfmux1aenrm8OzMn25v7TFJT9d11/f3L457ptJ4DI8ASSYp5AQ4/Gf7Su+777PEHW9fAwAY5EYnJS8zRMHRjqqYv1Y31y2/oQ826m/lb8r1CRULn/Jf6/knjzEoIf1uC+sVa/4k6F7NpWSeM7Us/bRb1Ydq0iJJBJ6Z4+khuqh5Qe6yGl7fpI7sQeUpqzn0S/9pHcwj2kdHUfyY3eQ0rv95EsB74MsUL4ksCi4SehFD6SpcV3J6uNL0MsQL5QWJP8JGTKR7Jy+UgWM59DrG9+EpLnjxMq6CFFGH0ka6Xvi2f59CWeFdVPQmTPyB/eEFhBut6pvoAdAgzUqbQWPxNb4Geyai48V1agDnEFeqqvgM4lFuCZygLzCK059VRrjVencmuuOlNcc9Wx6Fbz2Rc= -->
        </figure>
        <p>All this talk about parity in path puzzles has been quite meaty, but it shows how versatile parity is. By not having to care about how exactly the path looks like, we can analyze the puzzle in a much more high-level view, counting up cells of various colors and so on. The theorem is also applicable for subareas with just a small change, and this theorem is very powerful and flexible, able to handle areas of any size with ease.</p>
        <p>As a parting gift for this section, I leave you with one final Alcazar puzzle to test your understanding. Good luck!</p>
        <p>(During the talk, I presented this puzzle without comment as a final picture of my slides, letting people to recognize it's a puzzle they can solve. This is almost the same puzzle; the difference is I added a couple of walls near corners so that a corner is not automatically ambiguous.)</p>
    </section>

</section>



<section><h2 id="coloring">Parity coloring</h2>
    <p>The previous section talked about the applications of parity in path puzzles, with some powerful theorems that apply broadly. What about other kinds of puzzles?</p>
    <p>I gave it a thought, and I came to a conclusion. The flip-flop nature of parity is less evident in other kinds of puzzles. However, the <b>coloring</b> is still useful. In path puzzles, we color the cells in a checkerboard pattern, and pretty much all our deductions come from this coloring. This idea of coloring the grid is what we will carry to other kinds of puzzles.</p>

    <section><h3 id="coloring-region-division">Coloring in region division</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/mutilated-chessboard.png" alt="Can you divide it into dominoes?">
            <figcaption>Can you divide it into dominoes?</figcaption>
        </figure>
        <p>Consider the following grid, which is the chessboard with two corners chopped off. The grid has 62 cells remaining. Is it possible to divide it into 31 dominoes?</p>
        <p>This is a well-known mathematical problem called the <a href="https://en.wikipedia.org/wiki/Mutilated_chessboard_problem">mutilated chessboard problem</a>. The answer is <b>no</b>, it's impossible to divide it into dominoes. But how can we prove it, other than simply trying every single possible case?</p>
        <p>Well, it is a mathematical problem, so it sure has a mathematical solution. The key insight is, after coloring the grid with a checkerboard coloring (as we have done here), a domino will always use 1 dark and 1 light cell. Therefore, no matter how many dominoes we have, the number of dark cells and light cells should be equal. Although our mutilated chessboard has 62 cells, they don't come in equal quantities: there are 32 dark cells and 30 light cells. So it's impossible to divide it into dominoes.</p>
        <hr class="clear-float">
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/what-dominoes.png" alt="Divide into dominoes. What dominoes can you be sure of?">
            <figcaption>Divide into dominoes. What dominoes can you be sure of?</figcaption>
        </figure>
        <p>The previous example is great as a mathematical problem. For puzzles, though, especially logic puzzles, usually you want to actually have a solution. So let's look at a different example.</p>
        <p>Again, the goal is to divide this grid into dominoes, ignoring the black holes as they are not part of the grid. There are many solutions, but you can draw some of the dominoes for certain: they are used in all possible solutions. What are they?</p>
        <p>We can use a similar idea as above. This time, look at the cells on row 6 and below. There are 9 light cells but only 8 dark cells. That means, one of the light cells here must use a dark cell strictly above row 6. The only possible way to do so is the dark cell on E5: there is a domino E5-E6.</p>
        <p>Is that all we can say, though? Well, no. We can extend the argument. Now that we draw the domino E5-E6, there are 8 light and 8 dark cells on row 6 and below (ignoring E6 that is already paired). So we have a balance. Can any of them extend above row 6?</p>
        <p>We cannot. Why? A domino extending out of row 6 will be on B6 or D6 extending upward. These are both dark cells. If there's any such domino, then we're down one dark cell in our region (of row 6 and below). So we will once again need to pair one light cell to something above row 6. But there's no more light cell that can do so. Therefore, none of the dominoes can extend above row 6 any more. Therefore, B5 and D5 cannot be part of a domino going down to row 6; they have to point up to row 4. This gives the dominoes B4-B5 and D4-D5.</p>
        <p>An alternative way for this argument is to consider the cells on row 5 and below, instead of row 6 and below. There are 11 light cells and 9 dark cells, so two light cells must be part of dominoes that extend above row 5. These can only be B4-B5 and D4-D5.</p>
        <p>Finally, due to these two dominoes, C4 is nearly trapped; there's only one way to extend it as part of a domino, making C3-C4. This gives our four fixed dominoes: <b>B4-B5, C3-C4, D4-D5, E5-E6</b>. I'll leave it to you to verify that these are the only fixed ones; any other domino is not fixed, there's a solution not using it as a domino.</p>
        <hr class="clear-float">
        <p>It's worth mentioning why we're giving this coloring. When we talked about parity earlier, the goal was: no matter what the next step of the path would be, its color would be the same. As mentioned before, we're trying to find an <b>invariant</b>.</p>
        <p>This is also why we're using the checkerboard coloring. By doing this coloring, we know a domino will <em>always</em> use 1 dark and 1 light cell. It is an invariant, and it helps us understand the big picture much more easily. We can count up the cells and know the dominoes will require the counts to be the same.</p>
    </section>

    <section><h3 id="coloring-complicated">Complicated region division problems</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/which-holes.png" alt="Where is the hole so the rest can be divided into 1x3?">
            <figcaption>Where is the hole so the rest can be divided into 1x3?</figcaption>
        </figure>
        <p>Finally, I want to discuss one more example in region division. I will say that this is straying quite far from what's usually found in logic puzzles; this will be more likely found as a mathematical problem. But the line is vague, so I'll include just this one as an example.</p>
        <p>Consider a 8x8 board as pictured. Don't think about the coloring yet. A 8x8 board has 64 cells. We want to remove one of the cells, and divide the remaining 63 cells into 21 rectangles of size 1x3. Where can this hole be?</p>
        <p>We will use <span style="text-decoration: line-through;">parity</span> coloring, but this time, we're going to use more than two colors. However, the core insight is the same as before: we want our rectangle to always cover the same amount of cells of each color, so that our proof works no matter where the rectangle might be.</p>
        <p>For that reason, we're going to use three colors: red, green, and blue, as shown on the picture. When we color it this way, we have 22 red cells but only 21 green and 21 blue cells. So the removed cell must be a red cell.</p>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/which-holes-rot.png" alt="Same coloring, but rotated">
            <figcaption>Same coloring, but rotated</figcaption>
        </figure>
        <p>That still leaves quite a lot, but wait! This is not the only possible coloring with three colors. We can rotate the coloring so each color is diagonally slanted upward instead of downward. Once again, the removed cell must be a red cell with this coloring.</p>
        <p><em>Both</em> our arguments are correct. The hole must be red in <em>both</em> coloring. There are only four such cells: <b>C3, C6, F3, F6</b>. The hole must be one of these. (In addition, because the grid is clearly symmetric, if we can divide the grid with a hole on C3, we can simply rotate it to obtain a solution with any other holes.) I'll leave it to you to find a solution; it's possible to remove C3 and divide the rest into 1x3 rectangles.</p>
        <p>In any case, this kind of argument is getting quite complicated and is not something usually found in logic puzzles. I believe the main reason is that the fun is in finding the argument once; after you find it, you'll likely just apply it the same way. Compare with Alcazar, where even though you know about parity, it's still a challenge to figure out where you can apply it. However, these conundrums make for interesting math problems, and you might find more in mathematical contests.</p>
        <hr class="clear-float">
        <p>I'll leave this section with a math problem that I thought of while preparing this. I will say it's not easy at all, and like the above example, this is much more math than puzzle. Still, you might find it interesting. Good luck!</p>
        <div class="notecard callout">
            <p>Consider a 99x99 board. Remove one cell, and divide the rest into rectangles of area 4 (that is, size 1x4, 2x2, or 4x1, possibly a mixture of them). Where can this removed cell be? Determine all the possible cells.</p>
        </div>
    </section>

    <section><h3 id="coloring-regions">Checkerboard regions</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=vVRdb9owFH3Pr6j87Id8AB1+o13ZS8c+2qmqogiZ4JaIgDsnWasg+tt773VocMik7WGTydXJia/vsX0Pxc9KGsWHMKIR93kAIwxG9Ax8/B3GbVbmSpxdZLksyyxVfFKVK23EWbqSGoh5Jtec8y/TKS9Npby4SUy8mIWM0xOw5LW+eY0Z41Hi7ervYlfPRZzsef2jhR9aeCN2EGdix8IxEzGLGOjDZTiLfCQGR0SEBJR5JyglaIlB0EkZnHdShrToUcqQUt7LgpiAJN1TnFIMKd6CYl5HFD9S9CkOKV7TnCuKdxQvKQ4ojmjOOe7Z8+LQXgOO4Z8hOGM4TlbofF5U5kGmiokHmReKE7etNgtlHCrX+inPtu687HGrjer9hKRaPgKJl3s8faHNEhdv+WeZ506ybTKHSjOT5i5Vmsx5l8boZ4fZyHLlEAtoxVwVq+zJXUltS1dAKd3ty7XsVNu0O9577IXRE0dwutSpY1FPeP3Jdsuhl3n9DVr1s6hn2Km2q/GqqYNCgFctvKPviC6bDvMBzxoM8B6gPZX5tWW+iri+5QzrXFA2QrbRv0AopdF7qjcL2ErMjg7DfimqpV5Xh4bG3p1YuTc9chE2chFauYh65OIu/rHccbK31+D/1d/Ef/DnS2M0bXq9BnSP3YDttVXDW2e5/ImLsOCpkYDt8RKwXTsBdeooIE9MBdxvfIWrdq2FqrruwlInBsNSxx6LE+8N&a=BcCBCAAAAMAw0Hd/jdUA">
            <img src="math-in-puzzles/my-bilattice.png" alt="Bilattice puzzle, by me"></a>
            <figcaption>Bilattice puzzle, by me<br>
            (Click to try it; no answer check)</figcaption>
            <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7VdNb9tGEL3rVwR73gOXH7LFm5PavbhOW7sIAkIQaJmOCVOmQ1FNQcP/PW921hEpccioReseAkq7w7ezO29nPziz/rxJq0xHeIKp9rTB45up/Yce/V6eq7wusvjN27xI6zpfZvpkU9+VVfxmeZeWABZ5eq+1fn92pm/TYp1NEtdzPnlqZnFzopuf40T5Stu/UXPd/BY/Nb/EzYVuLtGkdADsHJJR2od4uhU/2HaS3jFoPMgXTob4EeIyr5ZFtjhn5Nc4aa60IjtvbW8S1ar8M1Pczb4vy9V1TsA1plVk67v80bWsNzfl/cbpmvmzbk6Y7mUPXRIdXRKZLkk9dGkW/zLd2fz5GW7/HYQXcULc/9iKx1vxMn5CeRE/KX9GXQNw4bVRgUdA2AICArB23wDbhSbngNDsdAmPdrpEdtBWl8h2+WYWZIyl9NGWZ7b0bXkFxroJbPmTLT1bRrY8tzqntvxgy3e2DG05tTpHNOfv9IrywTTAVgU/qnwV+6jgAnoLucL8UZGj0BZAkypoEghNejvmijVD1iQ30RuPST6iN9YMWZP8hDfyDr1NuYImgawZseaUePIa/nPnKePNtDE8ddSQmQFqbZxLUENm66i1IQeQHAAnL1jc38omgD67xXghxmQvWtmLrDyDiveiAlNtuUPHmTUw68MP1tQxTLETjYHc0WlTfqFGU3HjE023qDNi88IMdIxTMaTS6tqZLZka3XEJWXdP9H3SfJLg2lTrslisN9VtusQlYG9VnHNgD5vVdVZ1oKIsH4v8oauXf3ooq6y3icDs5hPAutp01K/L6oYG3+Jf0qLodOavRgfiy6wD1RVuqtZ7WlXllw6ySuu7DtC61TojZQ91l0Cddqef3qc71lbbGT9P1F/K/hMsLK7lH1+k1/ki0RJ4B32XXv+DkMC7uOWa91o9bhbpYlkWCkGNtrgn4KYfD4RxcJf049I4x/14eHQYjuuvX1/gEwp8QmFeocAzEOz6gYCHffgF8bHnF59DG030KfQPeOhCSPrCBA/eGJLdAzfGwQsqbSRpQSX+By5oJPCJpA0mjD+VxhH4R9KGPGjjyQcqmgp4r/4phRoccEnNLgYTmzkse5XBXRgoNnNkKDW7YFHszfGjSI1DSnHeHGUONSPwFJpdLCp25vB0qHnM5bLTXFwreoVDXbE3R7+Dg4+s58CKcNg8tGCIpCWfcnAtOo3jbZE4h+BDzMZ2muyVH2fk75yR/+96Dm/E0W08fAhGjtDIARw7vsOHf+TqGLl4hq8t6c77z2Nxm7qVVW/WC7gn8QXam+A6nHPcLr6Xz5LB/ZQWaE9WC3Q3sQW0n9sC3EtvgQkZLo26m+QSq908l0ztpbpkqp3tJvPJVw== -->
        </figure>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/example-chocobanana.png" alt="Example Choco Banana puzzle and its solution">
            <figcaption>Example Choco Banana puzzle and its solution<br>
            (Not an example of Bilattice!)</figcaption>
        </figure>
        <p>I'm sure you see a puzzle and are immediately interested to try it first, so here are the rules.</p>
        <p>Shade some of the cells black. Each number indicates the size of the island it's on, whether white or black.</p>
        <p>That's all, have fun! Unfortunately there is no answer check available for the puzzle, so you just have to celebrate it yourself when you think you have the solution.</p>
        <p style="margin-top: 5em;">Oh, are you done? How was it?</p>
        <p>Up until now, we have been talking about coloring the cells. There is a different kind of coloring that appears quite often: we color regions instead of cells. Huh?</p>
        <p>I've seen several puzzle games and logic puzzle genres with the following property. The objective is to shade some cells black. However, clues usually refer to the "islands" formed by them &mdash; an "island" being a mass of cells that are connected side by side (not only at a point). For example, a number might refer to the size of the island containing it.</p>
        <p>Puzzle game examples include <a href="https://www.starmapsllc.com/bilattice"><b>Bilattice</b></a>, <a href="https://www.islandsofinsight.com"><b>Islands of Insight</b></a>, and <a href="https://taiji-game.com"><b>Taiji</b></a>, and I'm sure there are others I don't remember. Logic puzzle genres include <b>Choco Banana</b>, <b>Light and Shadow</b>, and <b>Nurikabe</b>. (An example Choco Banana puzzle and solution is shown; see if you can guess the rules.)</p>
        <p>In fact, cluing the size of the island is one of the clue types in Bilattice, explaining why I called the puzzle a Bilattice puzzle. Technically this is a spoiler, but it's also the first clue type you find in the game, so.</p>
        <hr class="clear-float">
        <p>For me, it's quite fascinating that you're shading cells, but the clues are about the regions. The regions are implicit, coming out from which cells are shaded and which aren't.</p>
        <p>Looking at it another way, here's a different way to phrase the rules. Divide the grid into regions, such that we can color the regions using two colors, and no two regions of the same color share any side. The last bit is because those regions would otherwise merge and get counted as a single region. The Choco Banana solution shows this duality: I shaded some cells black, but I also drew borders to indicate the regions.</p>
        <p>By drawing the regions borders instead of shading cells, one peculiar property arises: <b>there is no T-junctions anywhere inside the grid</b>.</p>
        <p>Why? Well, circling around any point, we must always alternate colors around the region; otherwise we have two regions of the same color bordering each other. But with a T-junction, we will change colors three times before returning back to our original region. We end up on the wrong color. If we start with a white region, then circling around a T-junction, we will see a black region, then a white region, then... back to our original region, which is white, but it should have been black. That doesn't work out. That's why there is no T-junction. (T-junctions on the edge are fine, because the outside of the grid doesn't have any color.)</p>
        <p>More impressively, the converse direction applies: if there is no T-junction anywhere inside the grid, then we will be able to color the regions with two colors. Unfortunately, the proof is quite complicated to write out, relying on graph theory, so I will skip it for now. Maybe in a future update I will include it here.</p>
        <p>In any case, this equivalence greatly helps puzzles, both solving and writing. Due to the duality, both shading cells and marking region borders are helpful. Sometimes you don't know whether a cell will be black or white, but you know it's of the same or opposite color as a nearby cell, and you can still mark a region border in this case.</p>
        <p>The region borders also help a lot with avoiding T-junctions. Once I know three borders around a point, I can draw the fourth border, since I have to make a plus-shaped crossing instead of a T-junction. Or if I know two borders around a point and one segment that can't be a border, then the last segment on that point can't be a border either.</p>
        <p>Finally, back to the puzzle. I told you there was no answer checking? Sorry, I was lying. There's answer check, but you have to draw the region borders instead of the shaded cells. (Well, if you were shading cells, there would be two solutions, because you could change all black to white and vice versa.)</p>
    </section>

    <section><h3 id="coloring-behavior">Coloring based on behavior</h3>
        <figure>
            <img src="math-in-puzzles/ame.png" alt="A puzzle in A Monster's Expedition" style="width: auto;">
            <figcaption>A puzzle in A Monster's Expedition</figcaption>
        </figure>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/ame-coloring.gif" alt="Coloring cells by behavior in AME">
            <figcaption>Coloring cells by behavior in AME</figcaption>
        </figure>
        <p>Finally, there is one unusual way to apply coloring. I think it's quite rare; I have this one example, and I'm having trouble thinking of anything else. But it's still a truly intriguing example, so I'm including it. (Also, it was included in my talk, so I feel I need to include it here too.)</p>
        <p>The above is a puzzle from <a href="https://www.monsterexpedition.com"><b>A Monster's Expedition</b></a>. It's a great game, and if you haven't played it, you should. Unfortunately, I won't describe the full mechanics or anything; if you're not familiar with the game, look up some Let's Play videos to understand the mechanics. This is an early puzzle, so you don't need to know that much to understand the puzzle. I will spoil this puzzle entirely, though, so that's a spoiler warning.</p>
        <p>What I found in A Monster's Expedition is that you can exhibit some sort of parity/coloring on the cells, where the log will behave differently. By giving four colors as shown in the animated example:</p>
        <ul>
            <li>On a purple cell, the log is always standing upright.</li>
            <li>On a red cell, the log is always laying down vertically.</li>
            <li>On a blue cell, the log is always laying down horizontally.</li>
            <li>On a white cell, the log cannot stay still; it is rolling somewhere.</li>
        </ul>
        <p>This coloring persists over the entire grid. Without anything else affecting the log, it is always going to stand upright on a purple cell, no matter which purple cell you're bringing it onto, and so on.</p>
        <hr class="clear-float">
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/ame-change-parity.gif" alt="Changing the parity">
            <figcaption>Changing the parity</figcaption>
        </figure>
        <p>However, it's possible to <b>change the parity/coloring</b>, by utilizing blocks. Note that, normally, the log cannot stay still on a white cell. However, a block may stop the log from rolling further. If the log stops on a white cell, this is a problem, because our coloring is no longer correct.</p>
        <p>The solution to this is to revise the entire coloring. If the log stops laying down horizontally, then well, that cell has to be a blue cell, and we color the entire rest of the grid to match. After hitting this block, the log will now behave under the new coloring. The second example shows this in action.</p>
        <hr class="clear-float">
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/ame-diagram.gif" alt="Using parity to solve the puzzle">
            <figcaption>Using parity to solve the puzzle</figcaption>
        </figure>
        <p>It's possible to use this ability to change parity in order to plan solving a puzzle.</p>
        <p>If we try to give a coloring to this puzzle from the actual game, we find that the log will have to end up on a red cell (the marked arrow). However, this is a problem, because the log also has to be laying down horizontally, in order to become a bridge for us to cross. A red cell means the log is laying down vertically, so the orientation doesn't match.</p>
        <p>The solution is to change parity. There's a block we can use to change the parity (in the actual level, this is the pedestal with the backpack). By rolling the log to that block, we change the parity, and now our destination is a white cell.</p>
        <p>A white cell is not enough, though. The only way for a log to get to a white cell is by rolling a log there. The only way to get to the goal is by rolling from the right, and that means the log will be vertical. So we have to change parity once again. It is not depicted in this animation, but it's possible to do so &mdash; by using the stump left over from knocking the log down.</p>
        <p>The main idea behind this is how we can plan ahead the solution very easily by using parity, and the ability to change parity. We know we have to change parity, so we can simply look where we can do so. Once the color of our destination matches the orientation we need, we can simply bring the log over.</p>
        <p>Looking from higher up, the coloring we gave to the grid serves to dictate the behavior of the log. No matter what cell exactly is the log on, its color will tell its orientation: standing up, laying down in what axis, and so on. Being able to color the grid makes our reasoning much simpler, in the same vein as all the parity and coloring we've done previously.</p>
    </section>

</section>



<section><h2 id="topology">Topology</h2>
    <p>Topology is the study of objects under continuous deformations. It's about properties of an object that remain the same even when the object is stretched and twisted. But it does <em>not</em> include transformations like poking a hole or tearing it apart. Basically, the transformations are continuous: nearby points remain near, faraway points remain far.</p>
    <p>In puzzles, topology often comes in the form of connectivity. Two points have to be connected, either with a path or a series of cells or something else. We might not yet know the exact path &mdash; it's something we're solving for, after all &mdash; but we may know they have to be connected, and that alone may lead to some logic and deductions.</p>

    <section><h3 id="topology-checkerboard">The checkerboard lemma</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/checkerboard-lemma.png" alt="The checkerboard lemma">
            <figcaption>The checkerboard lemma</figcaption>
        </figure>
        <p>Some logic puzzle genres, such as <b>Cave</b> and <b>Yin-Yang</b>, contain the following two rules:</p>
        <ul>
            <li>All black cells must be connected (through side by side connections, not just diagonal).</li>
            <li>All white cells must be connected (similarly).</li>
        </ul>
        <p>These two rules are enough to invoke something called the <b>checkerboard lemma</b>. The statement of the lemma is simple: there is no 2x2 area where the cells are colored in a checkerboard pattern.</p>
        <p>Why is that? It's something to do with topology. Consider the illustration. The black cells must be connected in some way. Once we do this, we can draw a path along the black cells, and a final diagonal cut to form a closed curve. A closed curve divides the grid into an inside and an outside. The two white cells are on opposite sides of the diagonal cut, so they are on opposite sides of the curve: one inside, one outside. As such, it's impossible to connect the white cells without crossing this curve.</p>
        <p>This lemma is very important in these puzzles. The main use is that, if three of the cells are filled in a checkerboard pattern already, then the last one must <em>not</em> create a checkerboard pattern, and so we can deduce its color.</p>
    </section>

    <section><h3 id="topology-border">The border connectivity lemma</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/border-lemma.png" alt="The border connectivity lemma">
            <figcaption>The border connectivity lemma</figcaption>
        </figure>
        <p>But that's not all! Besides the checkerboard lemma, any puzzle with those two connectivity rules (all blacks connected, all whites connected) also satisfies a second lemma that I call the <b>border connectivity lemma</b>. Along the border of the grid, it's impossible for the blacks to be on two or more separate segments; similarly with white. That is, all the black cells on the border must be contiguous as a single solid segment, and similarly with the white cells.</p>
        <p>The proof is actually similar. Consider the illustration. The black cells must be connected, and this connection must go through the center of the grid, since there are white cells along the border on both sides. But after drawing this connection as a path, we have just divided the grid into a left part and a right part; there's no way for white cells from one part to cross and connect to the other.</p>
        <p>Note that if at least one side is missing white cells, then it's possible to connect the black cells along the border on that side. Then, although this path still divides the grid into two parts, one of the parts is empty, so there's no connection of white cells required across the path.</p>
        <hr class="clear-float">
        <p>Notice how similar the proof is with the checkerboard lemma. In fact, we can connect the two ends of the path along the literal border of the grid (one way or another), and we end up with a closed loop: the white cells are again split, one of them inside the loop and another outside the loop.</p>
        <p>We can go even further. Visualize the grid as if it's on a sphere; contract the outside into a single point. Then, the border connectivity lemma is nothing more than the checkerboard lemma applied to this one point! Sure, the checkerboard lemma only says about 2x2 shapes, but it can be generalized (especially to triangular grids and such) that there's no point in which the colors alternate. This is exactly the border connectivity lemma.</p>
    </section>

    <section><h3 id="topology-yinyang-test">Your test: a Yin-Yang puzzle</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=tVTfb9o8FH3PX4H87E0kwAZ+67qyl7ZbB1OFoqgy4EJEfvA5yYqM6N/ee6+ZgpNMmj6pMrk6Ob65PrbvofivklrxEYzhmPe5DyMYj+kZ9vH3Z8zjMlGit4izDwuZbfhVVW5zLXr7ypiPSZzteuog032iOOffp1P+LJNCeeH588gLmc84C+DxWfRqZq8hY9yPvKP5KY7mSYTRiZtfNRzXcCaOEO8p+hQX4siCCROhz9kq1qtEPd1hNc4GPrBBix13scOgq8IQ67ZyR1i3kQtCpiQnoDgHtdwMKH6l2Kc4onhLOTcUHyleUxxS/EQ5n3G/nhcG9iJwjP4NwfnCUbIiT56KSj/LlWKi1JXiRGVVulSaCboTSyV5vodbg7QLMt5kuVadU0iq9aYrf5nrdaP6i0wSh7B95lD2JB2q1LHzLrXOXxwmleXWIZayhL4stvHeraSy0hVQSlei3MnGamm955PHDoyecADHO8A2nQjzwM034TQyNw/Qp3fCLLBNbUvjXVNSAPCmho80j+jakn4f8P0ZA1wAdLrO/BChmXOG63yhrxGyNP8NQq0OfF/l6RK2ErKLw7AzRbXOd9U5lxr2ysqddcgd1HIRWrmIOuTiLi7k3r6D3El0stfQ/9//Ee9k0MPZabmuzXbRR0B3GA7YTmOd+Za3gG+5CBdsGwnYDi8B27QTUG1HAdkyFXB/8RVWbVoLVTXdhUu1DIZLXXosjLw3&a=VcbBCQAwCEPRXXL2YKtCO0tw/zVsjoXP45MIhyGW2OKI+0hd6srRxq8e">
            <img src="math-in-puzzles/puzzlink-yinyang.png" alt="Yin-Yang puzzle, from puzz.link example"></a>
            <figcaption>Yin-Yang puzzle, from puzz.link example<br>
            (Click to try solving)</figcaption>
            <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7VXfb9owEH7nr6j87E35uYHfuq7shbbr6FShKEIGXBqRxMxJ1sqI/713TiZIYqRqUteXyeR8+Xw5f3fEX4pfFVeChjCCIXWoC8MbDs0VOPj7M+6SMhXsbJbkH2Y8X9PzqnyUip1tK60/pkm+ORPPPNumglJ6Mx7TB54WYhA1j8eDnR4xfUv1NxYRl1DiweWSmOpbttNXTM+onsISoS5gkzrIA/fy4N6bdfQuatB1wL9ufHBn4C4TtUzF/KpGvrNI31GC+3wxT6NLMvlbkIYH3i9ltkgQWPASqiwek22zUlQruamaWDfeU31e051a6PoHuujWdNGz0MUqjuhO3oDuKN7voe0/gPCcRcj958EdHtwp24G9NtY1dsZ2xBtBGhc2O+4n8V1AvR46tKGBZ8sQYN5ebIh5O7FAZGzoeMbeAVuqfWO/GusYGxo7MTGXxt4be2FsYOwnE/MZ631lR4jvEAaEsGCcoBacoFCcoAaYgvoOK4IpxAf6jXyjKiKvPqw4wtd58SCCY0gKmc6LSj3wJbxU5pTCewNYXmULoVpQKuUWjnY7LlnnUgnrEoJitbbFL6RadbI/8TRtAbUYtaD6fWhBpYJ3/+ieKyWfWkjGy8cWcHROWplEXrYJlLxNkW94Z7fsUPN+QJ6JuSIf+uv/17h30jj8C5y/Vrr3kZkIuut7VN9Qsq3mfL6UKYHPJDW4ewJ3TuAjOw5fdDt+Ij48lb+f55930xw+qazKBbBFvAC1ilSD93QK8J4i4YZ9UQLUokuAdqUJoL46AdgTKMBOaBRm7coUsuoqFW7VEyvc6livonjwAg== -->
        </figure>
        <p>To test your understanding, here's a <b>Yin-Yang</b> puzzle. Shade some cells black. All black cells must be connected side by side, but there may be no 2x2 area of black cells. All white cells must be connected side by side, but there may be no 2x2 area of black cells. Cells with white circles must remain white, cells with black circles must be shaded black. Simple enough? Good luck!</p>
        <p>This puzzle was not written by me. I took this puzzle from a website called puzz.link, where people can create links to logic puzzles that can be played online (including an automatic checker). I will share the full link below, inside the spoiler block with the full solution.</p>
        <details class="notecard callout clear-float"><summary>Logical solve path to the puzzle</summary>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/puzzlink-yinyang-1.png" alt="Solving the puzzle, step 1">
                    <figcaption>Solving the puzzle, step 1</figcaption>
                </figure>
                <p>In "shading" puzzles such as Yin-Yang, it's often useful to mark cells that are known to be white. Here, I'm marking them with green. Some people prefer to use a dot on the cells. But either way, it's important to distinguish cells that are known to be white from cells that are unknown.</p>
                <p>Either way, we invoke the border connectivity lemma. There are two masses of white cells on the left and the right sides of the grid. They have to be connected through the border. One way (downward) is blocked by a black cell, so it has to be along the top edge.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/puzzlink-yinyang-2.png" alt="Solving the puzzle, step 2">
                    <figcaption>Solving the puzzle, step 2</figcaption>
                </figure>
                <p>We now use the rule specific to Yin-Yang: there is no 2x2 area of entirely the same color. The top corners are almost full of white cells.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/puzzlink-yinyang-3.png" alt="Solving the puzzle, step 3">
                    <figcaption>Solving the puzzle, step 3</figcaption>
                </figure>
                <p>This time, we use the checkerboard lemma. There is a 2x2 area that's almost a checkerboard on the left side. To avoid that, we have to put a black cell. This in turn creates a 2x2 area almost of the same color, so we can put a white cell at the middle of the grid.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/puzzlink-yinyang-4.png" alt="Solving the puzzle, step 4">
                    <figcaption>Solving the puzzle, step 4</figcaption>
                </figure>
                <p>We now have another instance of a 2x2 area that's almost a checkerboard. We get a new black cell, which in turn forces a white cell to avoid another 2x2 area of black.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/puzzlink-yinyang-4.png" alt="Solving the puzzle, step 4">
                    <figcaption>Solving the puzzle, step 4</figcaption>
                </figure>
                <p>Finally, recall that all white cells must be connected. The center one needs to escape to the right. The one near bottom-left has to hug along the entire bottom wall. One cell remains, which is black to avoid a 2x2 area of white. This solves the puzzle.</p>
                <p>As mentioned, this puzzle was taken from <a href="https://puzz.link/rules.html?yinyang">the example puzzle used by puzz.link</a>. As you can see, the original rules for Yin-Yang asks you to place circles instead, but I find shading cells to be much easier to understand. The rule "all cells of a color are connected" is impossible to see with circles.</p>
            </div>
            <hr class="clear-float invisible">
        </details>
    </section>

    <section><h3 id="topology-jordan-curve">Jordan curve theorem</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/jordan-curve.png" alt="Jordan curve theorem: there are an even number of intersections">
            <figcaption>Jordan curve theorem: there are an even number of intersections</figcaption>
        </figure>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/jordan-curve-completing.png" alt="Completing the intersections with Jordan curve theorem">
            <figcaption>"Completing" the intersections with Jordan curve theorem</figcaption>
        </figure>
        <p>Let's move to a different setting, back to path puzzles. This time, we don't need to visit all cells. Parity becomes less useful, because by skipping cells, we can no longer be sure of the counts of the colors. Instead, we will use topology, specifically the Jordan curve theorem.</p>
        <p><b>Jordan curve theorem</b> states that any closed loop divides the plane into an inside part and an outside part. It's famously known as a theorem with a very intuitive and obvious statement, but it's very difficult to prove, because a "closed loop" in mathematics can get incredibly ugly. That said, for puzzle purposes, the loops will be simple and nicely behaved, and the proof for the theorem is easy in this case.</p>
        <p>In puzzles, the common application is to consider a path. The path is not restricted by the loop in any way; it may intersect the loop however many times. It may also touch the loop, but if it doesn't <em>cross</em> the loop, it's not counted as an intersection.</p>
        <p>With this, the path is going to alternate between inside and outside the loop after each intersection. (Look, another instance of parity!) If the path intersects the loop an <b>even</b> number of times, then its endpoints are on the <b>same</b> side: both inside or both outside the loop. If an odd number, then the endpoints are on opposite sides.</p>
        <p>In the first example, we see a green path that intersects the red loop a total of 4 times. This is an even number of times. Indeed, the endpoints of the path are both outside the loop.</p>
        <p>In the second example, we see a puzzle in progress. (In path puzzles, it's common that we have several partial short paths that we later manage to join up together.) The entrances into the red loop are almost entirely determined: we have several intersections, and we have several entrances that <em>cannot</em> be used as they would lead to a branching/intersecting path. Only one entrance remains, and we can use Jordan curve theorem to determine it. We have 3 intersections so far. Since the endpoints are both outside, we need an even number of intersections; that means the last one has to be an intersection, and we can draw the line going in.</p>
        <hr class="clear-float">
        <p>Notice that we have actually used this idea earlier with the checkerboard lemma. We drew a loop defined by the black cells; this divided the grid into an inside and an outside. The white cells were split, so any path connecting the white cells had to cross the loop an odd number of times; in particular, at least once.</p>
        <p>When moving to a path setting, though, we can be more precise. In the shaded cells setting, if we draw paths connecting cells, the path may branch and form spurious intersections with the loop. We know there will be at least one intersection, but we can't be sure of the parity. In a path setting, though, there is no such branching; all intersections are part of the path, so we can count up the parity.</p>
    </section>

    <section><h3 id="topology-linelith-test">Your test: a Linelith puzzle</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=nVRdb5swFH3nV1R+9gNgvsJb13V76bJ16VRVCEUkpQ0qCR2BtSJqf3vPtXEIkGlahLi652Bfn2t8vP1dJ2XKPe5z4XGTW3hs1+Z2EHAROPI12+cmq/I0PLvKNmmeVSt+XlerogzPlqukqLLlPEueOOffp/whybepEVlqXmxEzGa8feP3ZvYeMcat2Ng1P8NdMw+j+I03v7o06NJZuEOchjtmOS4LIyYYxDLLZDGiaxOFwh3lidEozxlT41q+R5R1SAWyVkdBiSX13EGPTR9tzpZZuczT+WxGLaFDKjOkMeWLnGjLeIPeeCNk/CyjKaMr45Ucc0ktC/wOgR5tCwIIOFYLHABXAxfA08AD8DXwAQINAoCJBhMCuvTEBkA/CggAbJkCDgA2SwEXAP0p4AH4WpsPbRp4AL4GPkCgQQCwn+MCeBo4AO6+GkqLPYACoRUIaBNSG7boVm7UhYyOjJ7cQJ+OjmFEAl3tH0g/NccBxlll2yKfb+vyIVmmLJRHnEtuU68Xadmj8qJ4zmETFlZl3XLZ46Yo0+7LYHh6/9gn1fhFUd4Pir8ked4jlId7lDp9Paoqsx5OyrJ46THrpFr1iEVSwfHbVfbcr5Ruqr6AKulLTJ6SwWrrruc3g70y+Ub4m1zQPTAJm2vefFVm1jcFb65xEXwLmyndA+rOIHtIS9pIL9uU6Fs5gNgLxVom8inlJgyM/A5536zNjzBqbjijpT7J+ZSydfEHWmURiZfFeoFuInawH+rLtr4vnup2rLT5uVI8O6JYdIopVYIpGwlWfRzovTpJLp2z12NKJ/Gb+gnmf13Bh9ffaTfaP0372vqsKI9aDfQRt4E9aquWHzkL/MhDtODYRmCPOAns0Eygxn4CObIUuL+4iqoOjUWqht6ipUb2oqUOHRbFxgc=&a=RY7dCYUhDEN38Tkv1/RnGHH/Nb5gxAuCh5y0dK2NNSZB4jcwZoF1SAHDFGCaEnFJvTY1whREeEKU3qfgTqiU7kmle/rqUj1bKF8g1baVL0u090kd0v3/tz8=">
            <img src="math-in-puzzles/my-linelith.png" alt="Linelith puzzle, by me"></a>
            <figcaption>Linelith puzzle, by me<br>
            (Click to try solving)</figcaption>
            <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7VdRb9u4D3/Ppxj0rIfYsmXHb7td715y3e2fHobBCAI39ZagTt2/49wGF/3u+1GykzgWlzYD7l4OQWzyR5miKEokt//fZVUutYyk0nIsPfz80Jd+HEsVB+Y/bn8367rIkzfT9UNerOuVfLurV2WVvFmusrJeLxfr7F5K+f5afs6KbT5KPfvdfPTUTJLmg2x+T1LhC9n+57L5kDw1fyTNtWxmEAnpAZuC8oT0QV61JMEfzQBC31nUG4O+JnospAb9CfRyXS2LfDGbWV1/JmlzIwVN9Yv5nkixKf/OhVVi+GW5uV0TcJvVWOF2tX5sJdvdXXm/a8d682fZvLUWzxwWq4PFRFqDiRoYbNdxZO/0InMLbMQ3l6WT+fMznP4/2LpIUjL7rwMZH8hZ8oTndfIkvCCkbxU8Kcmh0OiFPkHYqwOk1WCUDobQUFekW9MOUGx0HSBY4hl7PsEen4Q+1trbT+GTmlMYn/xmPvTN8wZrk40yz1/Nc2yeoXlOzZgrWrJCrCus0fdgADGB1zIBmLBjQjC6YzSYqGMiMHHHxGAmHTMhplM98cFgPZZRYOAyywRg4CzLhGCwPstoMFFnWwTbOkaDiTomAhN3TAxm/00IRndMACbca4NqtWdggeosULBNGdvgoo/GUe/MMzBPbRwYUei8MLgEuReag/aF1eFFcUUvTIuXthxFFr1gGF6RBSMLUvDQy8piK6PwoRfspZdVFtuR5BJaAyL7OKpeGygi1FJDo4Jd4REVYTJQUdBRGhTsABUGkg4EUUqGlvKVVDAWVADMUnA1eZoo3LFWiwolnUIaF+wpJYNWi8YFbceBwgKJiiTFBY2LJG0wzastZaP87EamCtG5/yEEL6XnoxQXvdiWxWK7qz5nS9xZJg/gbgL2sNvc5lUPKsryka4wkdTVrsXWXx7KKj9ITobnd1/6oB1/W1Z3J8q/ZkXRA2yi60H2FulBdYWb9YjPqqr82kM2Wb3qAUdJo6cpf6j7BtRZ38TsPjuZbXNY8/NIfBPmn+JUIo38l0T/jSRKGzB+VSr9mQvnhWf2jDkpHIvE0LyX4nG3yBbLshCowqTBtRuPOZzRE4cMHjC4YnDfjSPLuXHGTtx67vGMnSGHM/bjhnfgV5SCcTyRiy4Ua9y+SH0u8dTc5cg6jNCmJO5LXyKxXiQ0GezVQrMYqpTcio0YrkBG/5H4B8oxNeepF4h/bu5zC+M38QXiywMIYckdH+a4QZkbZ/SgxHHjzuNjgxI1ESO0BRP3pamhLgpKU2m5DUX95D7nDM6OZxzEjQ+Y8ai2nDhqRPd4Bkc16B7vxOEkW4QyQluXchEYoMpDsc6JUbZS98j4gbln8ZEbZwIOFbEb5/zA5A/Uye79deJnlnfGOXCsLfM5oan8OaFpBrj9Mv0Bv5loGbgwMF0EN6dpLDih6TW4OU37wWcxRsifB+78cOeQuwjZi42rRxicu1C5+oWtg7i6iYljrl7j6juubuLqOK4Ocpyrf7zKNS1RWTnbScCOjhKos3Vs8UH3CHzQJ9KEw1YRqKNbBHraMAIa9owAB20jMKZzJK2nzSNZddo/0lSDFpKmOu4i0/noOw== -->
        </figure>
        <p>Here's an example puzzle. Again, draw a path, and you don't need to visit all the cells.</p>
        <p>What are the numbers doing? A number indicates how many cells are used by the path around it. For example, a clue of 3 means 3 of the 4 cells touching the clue will be used. This clue type appears in <a href="https://patricktraynor.itch.io/linelith"><b>Linelith</b></a>, so I'm calling this a Linelith puzzle.</p>
        <p>Feel free to give it a try! That said, I admit this example is particularly difficult and is definitely a jump up from the previous section. Don't feel discouraged if you can't solve it. Click below to see the solve path.</p>
        <details class="notecard callout clear-float"><summary>Logical solve path to the puzzle</summary>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-1.png" alt="Solving the puzzle, step 1">
                    <figcaption>Solving the puzzle, step 1</figcaption>
                </figure>
                <p>We're going to mark some borders to indicate that the path can't go through it. The main idea is that it will be very helpful to draw some Jordan curves using these borders.</p>
                <p>A clue of 1 tells quite a lot. We cannot use two cells around it, so we cannot cross any border touching the 1. That allows us to draw a plus-shaped border for each clue 1.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-2.png" alt="Solving the puzzle, step 2">
                    <figcaption>Solving the puzzle, step 2</figcaption>
                </figure>
                <p>We can now draw some closed loops at the bottom. Each of these loops has at most one remaining entrance, and we haven't drawn any path, so we don't have any intersection going into it. Therefore, the entrance must also be unused. This means the path doesn't enter the loop at all, and so all its cells are not used. Here I mark unused cells in gray.</p>
                <p>One particularly tricky example is the big loop. It has a diagonal line as part of the loop. The path cannot cross this diagonal line. The path <em>may</em> still use the cell, as long as it doesn't cross the line. That is, it may make a corner facing top-left, but no other possibility is allowed (as otherwise the path enters the loop).</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-3.png" alt="Solving the puzzle, step 3">
                    <figcaption>Solving the puzzle, step 3</figcaption>
                </figure>
                <p>Due to the unused cells around the bottom-right 1, only one of its cells remains; we know it has to be used, so the path makes a corner here. In turn, this corner uses three cells of the middle-right 3, so its remaining one cell is not used.</p>
                <p>Continuing to the left, the middle 3 already has one cell marked unused, so the remaining three cells are used. Finally, two cells are marked used for the middle-left 3, so there's one more cell. This means the path cannot make use of the border to the left of this 3.</p>
                <p>Besides marking unused cells in gray, I also mark used cells in green, even if I don't yet know how the path goes on them.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-4.png" alt="Solving the puzzle, step 4">
                    <figcaption>Solving the puzzle, step 4</figcaption>
                </figure>
                <p>The following step is tricky and requires a bit of lookahead. Unfortunately I don't know if there exists a cleaner step. While writing the puzzle, I recognized this issue, but I couldn't find a better way to construct the puzzle to avoid such step either, so this will have to do.</p>
                <p>The red loop already has one intersection (on top-right of the loop), so there are an odd number of intersections remaining. There are two more places for an intersection (on top-left), and we need an odd number of them, so exactly one of these two places is passed by the path.</p>
                <p>However, if we do the left one, we run into trouble. Since we then can't use the top one, the cell above it is a corner, as the blue lines show. But doing this causes us to use four cells for the 3, which is not allowed. So we will have to use the top one.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-5.png" alt="Solving the puzzle, step 5">
                    <figcaption>Solving the puzzle, step 5</figcaption>
                </figure>
                <p>We now use Jordan curve theorem again. After marking the path going up from the previous step, we know the path can't go left, hence why we can draw a new border. Then the red loop only has one entrance, which cannot be used. So the entire loop isn't visited and we can mark it all unused.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-6.png" alt="Solving the puzzle, step 6">
                    <figcaption>Solving the puzzle, step 6</figcaption>
                </figure>
                <p>This means the bottom-left 1 has one remaining cell, which must be used. The middle-left 3 also has one unused cell, so the remaining cell (top-left of the 3) is used.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-7.png" alt="Solving the puzzle, step 7">
                    <figcaption>Solving the puzzle, step 7</figcaption>
                </figure>
                <p>We cannot use the corner of the 2. So the cell we just marked as used is actually also a corner. What remains is the top half of the puzzle.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-8.png" alt="Solving the puzzle, step 8">
                    <figcaption>Solving the puzzle, step 8</figcaption>
                </figure>
                <p>Look at the red loop at the top-right. There are two entrances already used, and two remaining entrances. Since we need an even total, either these two remaining ones are both used by the path, or both unused.</p>
                <p>However, if the path uses both of them, it will use all four cells of the 3. That's impossible. So both of these are unused.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-9.png" alt="Solving the puzzle, step 9">
                    <figcaption>Solving the puzzle, step 9</figcaption>
                </figure>
                <p>We're on the final stretch. The 3 is split into two sides; both sides must use at least one cell, otherwise there are only at most two used cells. That means, on the left side, the path must make a detour to visit this side of the 3. It ends up using both cells of the 3's left.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-linelith-done.png" alt="Solution to the puzzle">
                    <figcaption>Solution to the puzzle</figcaption>
                </figure>
                <p>Finally, that completes the 3, so the remaining cell is unused. The right endpoint of the path has to make a detour to connect with the rest, and the puzzle is solved. Whew!</p>
            </div>
            <hr class="clear-float invisible">
        </details>
    </section>

    <section><h3 id="topology-conclusion">Topology: conclusion</h3>
        <p>Topology also finds a broad application in puzzles. In particular, many puzzles make good use of connectivity, which is a concept very widely studied in topology.</p>
        <p>In practice, we're mostly just using Jordan curve theorem. If a path crosses the loop an even number of times, then its endpoints are on the same side of the loop. If an odd number, then opposite sides.</p>
        <p>This theorem shines well in path puzzles, since each intersection of the path matters. In other kinds of connections, such as with shaded cells, paths connecting shaded cells may branch out and so we may have fake intersections. But we can still make use of the odd = opposite sides part, specifically that there will be at least one intersection. That leads to the checkerboard lemma.</p>
    </section>

</section>



<section><h2 id="gridpoint-counting">Specialized argument: gridpoint counting</h2>
    <p>Some mathematical arguments in puzzles are particularly specialized. They only apply in particularly specific situations: perhaps only a single logic puzzle genre, and even then, only for puzzles of a specific structure, not all the puzzles. They tend to involve more complicated mathematical arguments, but that makes them all the more satisfying to find.</p>
    <p>Gridpoint counting is one such argument. I included it in my talk because, to my knowledge, it was invented by me. Obviously I wanted to brag.</p>

    <section><h3 id="nurikabe">Nurikabe</h3><div class="flex-area">
        <div class="flex-right" style="flex-basis: 200px">
            <figure>
                <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=vZRLb5tAEMfvfIpoz3swD2N7b24a95K6D6eKIoSsNSYxMvamCzQRlvPZMzMLwjx6qNRWa0bDj2Xnv8v8nf0spI75BIbr8xG3YTjTKV3+CH/1uEvyNBZXy0Ine7mJ+bzId0qLq2gnVZ5E60TuOedfFgv+KNMstoLqxdAKmM04c+CyWfhWrt4CxrgXWqfyuziVaxGEZ17+aNJpk67ECeJSnJg7YSLARWxahjN3hsBtgOcjgFI1GDsIvAb4086MiYdg3IApveLXAGrbpOCB4oKiQ/EOBPLSpfiR4ojimOItzbmheE/xmqJH0ac5E9yiZQWOR6dej/Hfv4NPAKfNMpWus0I/yihmItdFzAkdi8Mm1kzQZzMoVeo5TY4w7QImT0el48FHCOPt09D8jdLbzuovMk1bwDRhC0WJjtI2ynXSupdaq5cWOch81wIbmUPTZrvkub1SfMzbAnLZlij3slPt0Oz5bLFXRlfgwvG62MkzUc55+cm0V93rvPwGrfxZlEvsZOx6m3qDJjmQ3jTpPT3H7Lrq0RHkyyqH9AFScyrrW0O+iqC84wzrfKC3MWUH9QuEGh14H6nDBrYSsIvDME+yYqv2RW0JbPa5kbuq5XqNXLeRi6mRi9mAXNzFP5Y7C8/mM4z+6G/kPxj6tXKa0o3ZLvoI8IDhgA4aq+I9bwHvuQgL9o0EdMBLQLt2AtR3FMCeqYD9xle4atdaqKrrLizVMxiWuvRYEFrv&a=VYq9DYQhDMV2SU1xF/I7C2L/NcB0n4SsF+O1RE2GqIMACepi4ibLfoAPe2df+B/gHBckoWACkiRJXOISV3TF2ax+y2SP9Xn7AA==">
                <img src="math-in-puzzles/example-nurikabe.png" alt="Example Nurikabe puzzle"></a>
                <figcaption>Example Nurikabe puzzle<br>
                (Click to try solving)</figcaption>
                <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7ZVfb5swEMDf8ykqP/sBMP/fuq7dS5dua6eqQlHkUNqgkNARWCeifPfe+YgowZY2aWtfJsL5/LuzfT4H3/ZHI6uMB/AIn1vchscJQ/X6Fv4Oz01eF1l8Mm2qfCUXGT9t6mVZxSfpUpZ1ns5zueKcX11c8AdZbLNJ0g2cTXZtFLenvP0UJ8xmnDnw2mzG26/xrv0ct1PeXoOJcRvYJTk5oJ736q2yo3ZG0LZAn3Y6qHegpnmVFtn8ksiXOGlvOMN1PqjRqLJ1+TNjXRzYT8v1IkewkDXsb7vMnzrLtrkvV03na8/2vD2lcK8P4bp9uKIPF1UKFzVNuLiLfxxuNNvvIe3fIOB5nGDs33s17NXreAdyGu+YCHAonIxNZ8NEhED0wPUPueiA5yBwe+CHRx6Bi8DrQaiG+AcAa9sqgjslL5R0lLyBAHkrlPyopKWkp+Sl8jlX8lbJMyVdJX3lE+AWfzMJzIFIXfhnetTAVrGBnGAD24JGkE1Qz7WoIRe3g5AzaDybGrJ5ZPNpgA8ZwEZQQwMCGhCQLSBbQLaQxoUEI+pFXQ+jpgN8g1Qmjquuh8Pj/f3ebJLAdcG2ZTHfNtWDTOHPr24T+H8D2zTrRVYNUFGWT0W+Gfrlj5uyyrQmhNn9o85/UVb3R7M/y6IYALouB4g+4wGqK/hGX/VlVZXPA7KW9XIAXn3Pg5myTT0MoJbDEOVKHq227ve8n7BfTL2JgPyK/3fxO93FeATWH93I7383JpBd4fH2irOnZi7naVkwKOccOVwFem7y9w080HMR6rkbGbjJ3zC/Y/K39Nyz9dx3DFzoeWDipnkM8YSGeSLDuQSG+CPDPKFhXd+Qf8+QT8+Q/8AwTzRe982/CnWJlpW2AgHWFCGg2mLT8VG9AT6qLLjguLgA1dQXoMclBtC4ygAcFRpghlqDsx6XG4zquOLgUqOig0u9rjvJbPIC -->
            </figure>
            <figure>
                <img src="math-in-puzzles/example-nurikabe-sol.png" alt="Solution to the example puzzle">
                <figcaption>Solution to the example puzzle</figcaption>
            </figure>
        </div>
        <div class="flex-main">
            <p>To explain this argument, I need to first introduce the setting: Nurikabe.</p>
            <p><b>Nurikabe</b> is a logic puzzle genre that's very popular in the logic puzzle community. An unsolved puzzle together with its solution is shown. Some of the rules might be obvious, but there are constraints on the black cells. You know what, let me tell you the full rules:</p>
            <div class="notecard callout">
                <p>Shade some cells black. Numbers may not be shaded. Each white island must contain exactly one number, which must be equal to its area. All black cells must form a single connected mass, but there may not be any 2x2 area of black cells.</p>
            </div>
            <p>Those are the full rules of the puzzle. You can try solving it yourself, playing around with the puzzle. Obviously you're spoiled on the solution, but you can still use it as a sandbox, see if you can figure out various logical steps in the genre.</p>
            <p>By the way, if you've been playing <a href="https://www.islandsofinsight.com"><b>Islands of Insight</b></a>, you might feel these rules are familiar. That's correct; some of the puzzles in the game are actually Nurikabe puzzles. (There are a lot of other logic puzzle genres in there, by the way. The system of only applying certain rules for any given puzzle is extremely expressive.)</p>
        </div>
    </div></section>

    <section><h3 id="gridpoint-my-nurikabe">I gave a Nurikabe puzzle to people</h3>
        <figure class="float-right" style="width: 200px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=vZRLb5tAEMfvfIpoz3sA41f25qZxL6n7sKsoWiFrjTcxMvamCzQRlvPZMzOLhTH0UKmtFkbDj338Gc/f2c9CWc1HMMIh93kAozce0z308TqNRZKnWlzNCpts1UrzSZFvjBVX8UaZPImXidpyzr9Mp/xRpZn2ZLUw8iQLGGc9uAMWvZXzN8kY70feofwuDuVSyOjIyx91Oq7TuThAnIkDC0dMSNZnoA+34WzoIxjUYBwiGJ4ArAto9QPFKcUexQVszsuQ4keKPsUBxTuac0vxnuINxT7FIc0ZoTzPk70+Vew0Bn//CcoHlWKZSZdZYR9VrJnIbaE5oX2xW2nLBJXcodSY5zTZw7QzmDztjdWdrxDq9VPX/JWx64vdX1SaNoBroAaKExunTZTbpPGsrDUvDbJT+aYBViqHhss2yXNzJ73PmwJy1ZSoturitF39zUePvTK6ZQjlDbELr0U54eUnaJ6zPuXlN2jDz6KcYRdixwbUGzSpB+ltnd7Te8xuHAx8yGdVDukDpK4qyztHvgpZLjjDcz7QakzZzvwCoU4HPsdmt4JPkeysGO5NVqzNtqjmBtjsEyd3fpLbr+WGtVxMnVzMOuTiV/xjudfR0f0M/h/9BfwHQ79WTjO2NttZHwHuMBzQTmNVvOUt4C0X4YFtIwHt8BLQSzsBajsKYMtUwH7jK9z10lqo6tJdeFTLYHjUucdk5L0D&a=Vc3RDcMgDADRXfjORwsYx7Mg9l8jff2LhE4yd4a9W5/taj1gQcIN9cP4ADuM8wu6KZnuQhId7AYRxBpgTEnaTV0S6d/U3Z4vSUlKUpKS1N+udq79OucB">
            <img src="math-in-puzzles/my-nurikabe.png" alt="Nurikabe puzzle, by me"></a>
            <figcaption>Nurikabe puzzle, by me <a href="logic.html#nurikabe-2019-05-19">(2019-05-19)</a><br>
            (Click to try solving)</figcaption>
            <!-- EDIT LINK: https://swaroopg92.github.io/penpa-edit/#m=edit&p=7ZVBb6M6EMfv+RSVzz4EMBhz6+u279JNd7ddVRWKIielDQoJXQLbFVG+e8ceIkJgpF1pX3t5IownP2bMfwx4tj8qXSRcwuEFfMwdONwwtGcwNr/DcZeWWRKdTaoiXel5ws+rcpkX0dliqfMyXcxSveKc31xd8SedbZNR3CROR7taRfU5r/+NYuYwzlw4HTbl9ddoV3+O6gmvb+ES4w6wawxywb1s3Xt73XgXCJ0x+JPGB/cB3EVaLLJkdo3kSxTXd5yZ+/xjs43L1vnPhDU6zP9Fvp6nBsx1CfVtl+lLc2VbPearqol1pnten6Pc24Nc0cr1WrnGRbnGG5BrqviP5arpfg/L/g0Ez6LYaP/eumHr3kY7sJNoxzxpUgVowWfDgrEBfgtCz4DgACDPsdkP1l5Z61p7B5Pz2rP2k7Vja31rr23MpbX31l5YK6wNbIw08n6zAOYKFgl4q3wcAhygHjOEOCg7eFCTGTDSQygcHDBPYILAaz4m+C4OOKePIT6GBLAsZkAoMUHinBLzJIZI1CkxL0QRChMUJihMUJigMEE1kUYgPq13WPvYFXYvOBz+3/83HcWwN7Btns22VfGkF/Cml0WVwLsMaFOt50nBIruZIMry/CVLNxB2BNPnTV4kg5cMTB6fh+LnefF4MvurzrIOwK2xg/CT7aCygO/x6L8uivy1Q9a6XHbA0bfbmSnZlF0Bpe5K1Ct9crd1W/N+xH4xe8YeLK/3/777QfuueQTjP9p9P34vjWF1vTGvbzh7qWZ6tsgzBq2bG+4qgocElwQPCO4TXAxzj4gXxPw+oScg9EuiXkWsj3II7hLcIzhRryLqVUS9IREvifkDQo9P6BdEvR6xbj6xboKIF8Rz8Yl4ScwvCZ2SqEtS69DX8+5fr93s86JtlEc9APBAswQ62BQb3uuLwHsd0Nyw3wSBDvRBoKetEFC/GwLsNURgRE80s562RaPqtDOaW/Wao7nVcX+Mp6M3 -->
        </figure>
        <p>One day, I wrote a Nurikabe puzzle and shared it with people, including on my puzzle Twitter account (now unused). I particularly remember one interaction with someone that's already well-known in the logic puzzle community. I don't remember who; it might have been <a href="https://zotmeister.livejournal.com">Zotmeister</a> but my memory is failing me (and the Twitter reply has been deleted).</p>
        <p>Basically, it was easy to find one solution for this puzzle. But they were having trouble proving it was the <em>only</em> solution. Logic puzzles are meant to have exactly one solution, since the solution should be able to be derived purely using deductive logic. So, how was I able to prove it was unique?</p>
        <p>Well, the reason I shared the puzzle was because I found a math argument in the first place, gridpoint counting. I explained the argument and they were amazed. By knowing the argument, and being convinced that it is true, they were able to quickly prove the puzzle indeed only has one solution.</p>
        <p>I would later use this argument in another puzzle in a logic puzzle contest I authored in 2020. Additionally, the argument seemed to be developed independently by a few others, since a couple puzzles using this idea appeared elsewhere. (I know of one: a puzzle by Elyot Grant in the 24-Hour Puzzle Championship 2020, postponed to 2023 for reasons we know.)</p>
        <p>In any case, most Nurikabe puzzles don't use this argument whatsoever. After all, that's how the Twitter correspondent could end up impressed when I explained the argument; they had never seen it before. But some puzzles do use this argument, and in those cases, often this is the only way one can solve the puzzles without resorting to massive bifurcations.</p>
        <p>So, what's the argument? Good question, let's actually get into it.</p>
    </section>

    <section><h3 id="gridpoint-intuition">Intuition behind the argument</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/my-nurikabe-fail.gif" alt="Failed attempts at solving my puzzle">
            <figcaption>Failed attempts at solving my puzzle</figcaption>
        </figure>
        <p>If you try to solve this puzzle randomly, by simply drawing islands arbitrarily, you will always get into situations where you have a 2x2 area of black cells, often several. (Well, the one exception is if you get the correct solution.) The animated example shows various failed attempts; every black 2x2 is marked with a red circle in the middle.</p>
        <p>So, what's the problem with this puzzle? Why does it feel like we keep failing to solve it?</p>
        <p>The reason is that we have very few white cells. It's so hard to reach everything. We keep having trouble stretching our islands far enough to cover all the 2x2 areas.</p>
        <p>When I thought about the argument, this was the key idea I had to realize. My instinct felt there was something wrong, but if I couldn't articulate it, I wouldn't have anything to start investigating it. I had to realize this key fact that the islands were too small, that the rule I kept breaking was the "no black 2x2" rule.</p>
        <p>Okay, the islands feel too small. I kept getting black 2x2s. Now comes the realization: instead of looking at cells, I want to look at gridpoints formed by the intersections of the gridlines.</p>
    </section>

    <section><h3 id="gridpoint-definition">Gridpoint definition</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/gridpoints-touched.png" alt="Islands and gridpoints they touch">
            <figcaption>Islands and gridpoints they touch</figcaption>
        </figure>
        <p>A gridpoint is simply a point formed as the intersection of two of the gridlines.</p>
        <p>I want to look at gridpoints <b>touched</b> by an island. The example shows several islands and the gridpoints touched by them.</p>
        <p>A Nurikabe puzzle gives the sizes of the islands. We can prove that an island of size <var>N</var> will touch at most 2&nbsp;<var>N</var>&nbsp;+&nbsp;2 gridpoints. It's not an equality; some islands have a "wrong" shape, like the square-shaped 4, and will touch less. But it's an upper bound, and it's possible to prove it by induction on <var>N</var>.</p>
        <p>As such, by adding up all the islands, we have a maximum total number of gridpoints available from the islands.</p>
        <p>At the same time, as mentioned before, every <b>internal</b> gridpoint must be touched. (Internal here means not along the boundary.) Why? Because if an internal gridpoint is not touched, then all cells around it are black. But this is exactly a 2x2 area of black cells, which is not allowed in Nurikabe.</p>
        <p>As such, from the grid size, we have a minimum number of gridpoints that must be touched.</p>
        <p>We have two bounds: an upper bound (from island sizes) and a lower bound (from grid size). In mathematics, when we have an upper bound and a lower bound and the two are close (or even equal), things happen, because you know all the extreme edge cases do occur. That's the same here: these two bounds might be close together, and gridpoint counting argument is exactly making use of this fact.</p>
        <p>I'll let you check for yourself that, for the puzzle with 4-5-6, we actually have equality:</p>
        <ul>
            <li>The upper bound is 36 gridpoints: the size 4 island touches at most 10 gridpoints, the size 5 at most 12, the size 6 at most 14. (There is no hidden island or anything, because a Nurikabe puzzle requires every island to contain one number.)</p>
            <p>The lower bound is 36 gridpoints, because the grid size is 7x7 and it has a grid of 6x6 internal gridpoints.</p>
        </ul>
    </section>

    <section><h3 id="gridpoint-defect">Knowing and finding defects</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/defect-1.png" alt="Defect #1: Island has 2x2">
            <figcaption>Defect #1: Island has 2x2</figcaption>
        </figure>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/defect-2.png" alt="Defect #2: Islands touch diagonally">
            <figcaption>Defect #2: Islands touch diagonally</figcaption>
        </figure>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/defect-3.png" alt="Defect #3: Island reaches the border">
            <figcaption>Defect #3: Island reaches the border</figcaption>
        </figure>
        <p>If the upper bound and the lower bound are close enough (or even equal), then there must be very few (or even no) gridpoints "wasted". Every gridpoint available from the island must be dedicated to touch every internal gridpoint, with an exception of very few points. If we can identify where we'll waste the points, then we know everywhere else, we cannot waste points.</p>
        <p>What are the ways to waste gridpoints? There are three such ways, and I call them <b>defects</b>.</p>
        <p><strong>Defect #1:</strong> An island has a 2x2 area of white cells. This essentially makes the island more "compact", and hence touch fewer gridpoints. Every 2x2 area in the island is a waste of 1 gridpoint. Count every 2x2 area, even if some of them overlap: a size-9 island that's shaped like a 3x3 square contains four 2x2 areas, and so wastes 4 points. Indeed, a size-9 island can theoretically reach 20 gridpoints, but the 3x3 square only touches 16.</p>
        <p>This can be proven by analyzing the inductive proof. A size <var>N</var> island touches at most 2&nbsp;<var>N</var>&nbsp;+&nbsp;2 gridpoints. The proof is that a new cell added to the island must share a side with an existing cell, and so share at least two gridpoints; that's why the new cell can add at most two new gridpoints. But, with a white 2x2, the last cell of the square only adds one point: it's already adjacent to two existing cells. That's where the waste comes from.</p>
        <p><strong>Defect #2:</strong> Two islands touch diagonally. I feel this is straightforward: only one island needs to touch any given internal gridpoint, so if two islands touch the same point, that's one wasted point that could have been used to cover something else.</p>
        <p><strong>Defect #3:</strong> An island reaches the border. Because we only need to touch the internal gridpoints, any point going to the border is a waste, and we could have used it for something in the interior.</p>
        <p>There's a quirky thing about this last defect. It's impossible to touch only one gridpoint on the border; it will always be at least two (there's one other next to the gridpoint). So, if the upper bound and the lower bound differ by 1, it's possible to have either of the two other defects, but not this one.</p>
        <p>Either way, those are the three kinds of defects. If the upper bound and the lower bound are close enough, then the differences come from defects, and it becomes practical to identify where they might happen. Sometimes you might not even need to determine where exactly, just a general area; if you can localize all the defects, you can still say there's no defect anywhere else.</p>
    </section>

    <section><h3 id="gridpoint-my-nurikabe">Solving my Nurikabe puzzle</h3>
        <figure class="float-right" style="width: 200px">
            <img src="math-in-puzzles/my-nurikabe.png" alt="Solving my Nurikabe: avoiding defects">
            <figcaption>Solving my Nurikabe: avoiding defects</figcaption>
        </figure>
        <p>Back to my puzzle. As mentioned earlier, there are 36 internal gridpoints, and there are 36 gridpoints available from the islands. That means we cannot have any defect whatsoever.</p>
        <p>What does this imply? That means none of the three kinds of defect may happen.</p>
        <ul>
            <li>From defect #1: There can be no white 2x2.</li>
            <li>From defect #2: No two islands touch diagonally.</li>
            <li>From defect #3: No island reaches the boundary.</li>
        </ul>
        <p>The first point is difficult to make use right now, although there are other puzzles in which this may matter a lot. The other two points have immediate implications, though. There are four black cells near the middle of the grid, because if any of them were white, that would be two islands touching diagonally. Also, the entire border is black, because no island can reach the border.</p>
        <p>This doesn't immediately solve the puzzle, although it's not too difficult to finish it up. If you want, you can try working it out on your own, or click below to read the solution.</p>
        <details class="notecard callout clear-float"><summary>Finishing up my puzzle</summary>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-nurikabe-2.png" alt="Solving the puzzle, step 2">
                    <figcaption>Solving the puzzle, step 2</figcaption>
                </figure>
                <p>In "shading" puzzles such as Nurikabe, it's often useful to mark cells that are known to be white. Here, I'm marking them with green. Some people prefer to use a dot on the cells. But either way, it's important to distinguish cells that are known to be white from cells that are unknown.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-nurikabe-3.png" alt="Solving the puzzle, step 3">
                    <figcaption>Solving the puzzle, step 3</figcaption>
                </figure>
                <p>I think the only tricky part after that initial deduction is this one.</p>
                <p>Consider the size-4 island. It may extend one to the right (to the black arrow), but if it extends once more (to the white arrow), then it will automatically merge with the top-right white cell. This is a problem, because the island ends up having size 5.</p>
                <p>As such, that cannot happen. At most, the size-4 island can extend up to the black arrow. But this only gives 3 cells, so the island needs to take another cell, which must be along the left edge.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-nurikabe-4.png" alt="Solving the puzzle, step 4">
                    <figcaption>Solving the puzzle, step 4</figcaption>
                </figure>
                <p>Remember that we still have to avoid defects. We can mark a black cell (immediately to the left of the 5) as otherwise there will be islands touching diagonally. In turn, this marks another black cell (to the bottom-left of the 5): we know the size-5 island cannot reach it, so if it were white, it would be a different island and thus there would be islands touching.</p>
                <p>By blocking the left side of the size-5 island, we know it has to extend to the right. This also forces a black cell (to the top-right of the 6) to avoid islands touching diagonally.</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-nurikabe-5.png" alt="Solving the puzzle, step 5">
                    <figcaption>Solving the puzzle, step 5</figcaption>
                </figure>
                <p>We're on the final stretch. By blocking the size-6 island from going up, there's only one way to resolve it along the bottom and left edge. (Pictured)</p>
                <p>And then the size-4 island is also blocked from going along the left edge, so it has to go along the top...</p>
            </div>
            <div class="clear-float">
                <figure class="float-right bg-white" style="width: calc(200px + 1rem);">
                    <img src="math-in-puzzles/my-nurikabe-6.png" alt="Solution to the puzzle">
                    <figcaption>Solution to the puzzle</figcaption>
                </figure>
                <p>And we solve the puzzle.</p>
            </div>
            <hr class="clear-float invisible">
        </details>
    </section>

    <section><h3 id="gridpoint-conclusion">Gridpoint counting: conclusion</h3>
        <p>And that's gridpoint counting. Quite involved, but has some wonderful insights.</p>
        <p>Once again, gridpoint counting is a particularly specialized argument. It requires the following conditions:</p>
        <ul>
            <li>No 2x2 area is all black. (So we can put a lower bound on gridpoints required, since all internal gridpoints must be touched.)</li>
            <li>We know the areas of all white islands, one way or another. (So we can put an upper bound on gridpoints available.)</li>
        </ul>
        <p>These conditions aren't very natural. Among the popular puzzle genres, only Nurikabe satisfies these conditions, so gridpoint counting is primarily used for Nurikabe puzzles.</p>
        <p>Even then, it only applies for puzzles of a specific structure: the available gridpoints should be low enough so that it's feasible to figure out where the defects are. Many Nurikabe puzzles don't go to this length, so this argument isn't as applicable.</p>
        <p>However, when it does apply, its power is enormous. I think the argument is beautiful, and it makes easy work of puzzles that otherwise look impossible. I'm proud to have discovered this proof, and the puzzle with 4-5-6 is one of my proudest works; I often show the puzzle to people interested in more advanced logic puzzles.</p>
        <p>The argument also showcases how math theorems are discovered and proved. It started from the idea that the islands were too small. I then crystallized the particular issue: that I kept getting 2x2 black areas. That made me think of gridpoints, and the argument became more formalized and rigorous starting from there. Finally, it ended up with a complete proof, which I could then use in puzzles.</p>
        <hr class="clear-float"><div class="flex-area">
        <figure class="flex-right" style="flex-basis: 300px">
            <a href="https://swaroopg92.github.io/penpa-edit/#m=solve&p=3ZTfb+o2FMff+SsiS5M2XffeOIEWIvWBn1erWlZWehmNEDKJISkmbvODsqDev73HDnckIa22h+1hAh8dPsc+Psf46+g5oSHDhMhvXcc6Bg/Xm7oahBhqSC4/Yz/mzNKGSeiv6YJpPw+FNhaJ4/2C20nsidDSHI+K2HfmPl1rtqEb+hkhZ0ZjembUZxj/tTJMOIs+a79GnAZupLlCC0SsxTLXT0ZXY1sWaK5PVyKgnP/5Gf82GOAl5RHDV9PHTm/dfum3//jSeDDN++Hy02NvdP/oTr6Rke5/CfUhbwY3t70O//Q1fbjx2lvWZ+e3kXA8zqhL04fJ1Y4Hg+bKW5LulddtLmmgR8/NcWvbGV1e1uxDv7OajQjCyIBB0Ox7evfdRgiTWW2f/m7t07llz15xen90m0f3ztqDHVp7ZJrIspEJC1UajC50CS5yoCVB6wgIUVPO86ReJvWGJPUcaag5edIihVVQEVF1TZUdKGsoO4aycWoq21NWV7ah7LWa01d2omxX2bqy52rOhWy8VrNNuDQVn8b/l8JFgTuBIsHnURIuqcPmbEedGFnZnc1HkBWHyQEFyWbBwsIsLsQT94OqBD9CBeivAhGyypCEzF29l0qGKlItROiWanoBDRZbUa9GATl+6PAiikO/8JuGoXgpkA2NvQJY0BhemMjzn4qZWFA6y5gWS6RrWtptczyO1xraITVsE8PllPptWWkbp19BHDmF43QEAr6x0qHUb6Z1jDYJhxdNcAFbHhjoQS00wO0f3YmKS6+bQaKDPzz44E7BzU5qfp2RW8tOxxjJvTtqtXTRRmyh+Kw2+dsRmwW0Z6PcAWETAlHiinVymEqkvttZB3d/swNI8qMD6WYdSK+iA9nYv9tBa/aa/Vn6P3pi/4NnbXfQtwg/kPgxWMYVSgf6gdhz0Sr+jq5z0TI/EbEs9lTHQCukDLSsZkCnggZ4omlg78haZi0rW1ZVFrfc6kTfcqu8xO1Z7Q0=&a=VY7LDcQgEEN74ZxDYD7M1BKl/zayfpxWiqxgG/OeZ8z7HtdPJ7rQjbZ04k/8GSjpwlmOHoe+sWakhm+Fkjqpk7qhLDjNwA9eieNwK7mVkCSdJN34G2fjFP/FcrFcrFWipwNPsdwstG6BbGqbyrCDDjngLgLg4XUFoQBwiMFLvZ96Hs7USqq8NQAvuKUjyLCCB0vr2GJpsXSP93r+vvcD">
            <img src="math-in-puzzles/nurikabenotouch-2020-11-25y-24.svg" alt="Nurikabe (No Touch), by me"></a>
            <figcaption>Nurikabe (No Touch), by me <a href="logic.html#nurikabenotouch-2020-11-25y-24">[2020-11-25Y-24]</a><br>
            (Click to try solving)</figcaption>
        </figure>
        <div class="flex-main">
            <p>I'll end this section with one last puzzle.</p>
            <div class="notecard callout">
                <p><strong>Nurikabe (No Touch).</strong> Standard Nurikabe rules. However, islands may not touch diagonally.</p>
            </div>
            <p>Look at that! I told you about three kinds of defects that can happen in gridpoint counting. The variant rule eliminates one of them, so only two kinds of defects to consider.</p>
            <p>That said, fair warning: this puzzle is <b>hard</b>. It appeared in a logic puzzle contest I wrote, <a href="https://logicmastersindia.com/live/?contest=M202011P"><b>25&nbsp;Years</b></a> (to celebrate me turning 25 years), and it was given a pretty high amount of points, indicating it was supposed to be difficult. Yes, it does use gridpoint counting, but I threw several extra tricks on top of it. (It's also designed that way to try to defeat random guessing.) You have to analyze your argument carefully to not accidentally discard a possibility. If you manage to solve it, though, props to you. Good luck!</p>
        </div>
    </div></section>

</section>



</body>

</html>
